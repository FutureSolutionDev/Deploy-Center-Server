import{i as cn,a as i,j as e,C as dn,u as _t,g as Oe,h as un,O as hn,L as Ts,l as pn,m as As,B as gn,n as xn,o as ce,N as qt,p as mn}from"./react-vendor-CmNTLjgi.js";import{i as yn,B as fn}from"./i18n-vendor-jtdHZIRR.js";import{a as jn,b as bn}from"./http-utils-DXjxg4zJ.js";import{d as Sn,K as vn,S as wn,R as os,M as Cn,e as kn,C as gs,D as Pn,I as Dn,f as Tn,h as An,a as Is,T as In,j as Rn,k as En,B as l,l as xs,m as c,n as ae,L as Fn,o as Wn,p as Ln,q as et,t as tt,A as Nn,v as Z,w as Mn,x as Rs,y as O,z as ms,E as J,F as se,G as q,H as W,J as Gt,N as D,O as de,P as Es,Q as ve,U as Ce,V as ke,W as Pe,X as zn,Y as he,Z as pe,$ as xe,a0 as me,a1 as ye,a2 as re,a3 as oe,a4 as Bn,a5 as N,a6 as ct,a7 as dt,a8 as ut,a9 as Un,aa as Kn,ab as On,ac as Hn,ad as $n,ae as Yt,af as st,ag as xt,ah as mt,ai as yt,aj as ge,ak as I,al as ft,am as Ee,an as $,ao as qn,ap as Gn,aq as Me,ar as ys,as as Yn}from"./mui-core-d88ht3AN.js";import{g as Vn,R as _n,B as Qn,C as Zn,X as Xn,Y as Jn,T as er,a as fs}from"./chart-vendor-Hp-kl2Ob.js";import{M as tr,B as sr,a as nr,L as rr,A as as,b as or,D as ar,P as Fs,c as De,R as ir,S as lr,V as gt,d as Ue,e as cr,f as dr,g as Qt,E as jt,h as is,i as ur,j as hr,k as Ke,l as ht,m as He,G as ls,n as pr,o as gr,T as xr,K as js,C as us,p as pt,q as mr,r as Se,s as Ws,t as Ls,u as cs,v as Ns,w as yr,x as fr,y as jr,z as br,F as Sr,H as vr,N as wr,I as bs,J as Cr}from"./mui-icons-BCtvPElI.js";import{p as Qe,t as kr,f as rs}from"./date-vendor-cbj2de6U.js";import{l as Pr}from"./socket-vendor-CA1CrNgP.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&r(x)}).observe(document,{childList:!0,subtree:!0});function n(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(a){if(a.ep)return;a.ep=!0;const d=n(a);fetch(a.href,d)}})();const Dr={name:"Deploy Center",description:"Comprehensive Deployment Platform"},Tr={dashboard:"Dashboard",projects:"Projects",deployments:"Deployments",reports:"Reports",settings:"Settings",logout:"Logout"},Ar={login:"Login",register:"Register",username:"Username",email:"Email",password:"Password",totpCode:"Two-Factor Code",confirmPassword:"Confirm Password",role:"Role",loginSuccess:"Login successful",loginError:"Invalid credentials",loginFailed:"Login failed. Please check your credentials.",registerSuccess:"Registration successful",registerError:"Registration failed",logout:"Logout",logoutSuccess:"Logged out successfully",usernameRequired:"Username is required",passwordRequired:"Password is required",emailRequired:"Email is required",loginSubtitle:"Sign in to your account",registerSubtitle:"Create a new account to get started",createAccount:"Create Account",noAccount:"Don't have an account?",haveAccount:"Already have an account?",loggingIn:"Logging in...",registering:"Registering...",totpRequired:"Two-factor code is required",totpPrompt:"Enter your two-factor code to continue",changePassword:"Change Password",oldPassword:"Old Password",newPassword:"New Password",currentPassword:"Current Password",confirmNewPassword:"Confirm New Password",passwordStrength:"Password Strength",weak:"Weak",fair:"Fair",good:"Good",strong:"Strong"},Ir={title:"Dashboard",subtitle:"Overview of your deployment platform",welcome:"Welcome",totalProjects:"Total Projects",activeProjects:"Active Projects",totalDeployments:"Total Deployments",successfulDeployments:"Successful",failedDeployments:"Failed",averageDuration:"Average Duration",recentDeployments:"Recent Deployments",deploymentsTrend:"Deployments Trend",queueSize:"Queue Size",globalStats:"Global Statistics"},Rr={title:"Projects",subtitle:"Manage your deployment projects",createProject:"Create Project",editProject:"Edit Project",deleteProject:"Delete Project",projectName:"Project Name",repoUrl:"Repository URL",branch:"Branch",projectPath:"Project Path",projectType:"Project Type",description:"Description",isActive:"Active",inactive:"Inactive",actions:"Actions",view:"View",edit:"Edit",delete:"Delete",deploy:"Deploy",viewDetails:"View Details",noProjects:"No projects found",noProjectsFound:"No projects found",createSuccess:"Project created successfully",updateSuccess:"Project updated successfully",deleteSuccess:"Project deleted successfully",createError:"Failed to create project",updateError:"Failed to update project",deleteError:"Failed to delete project",failedToLoad:"Failed to load projects",failedToLoadDetails:"Failed to load project details",failedToDelete:"Failed to delete project",createFirstProject:"Create your first project to get started",confirmDelete:"Are you sure you want to delete this project?",confirmDeleteDesc:"All deployments related to this project will be deleted. This action cannot be undone.",deploymentStarted:"Deployment started successfully",webhook:"Webhook",webhookSecret:"Webhook Secret",showSecret:"Show Secret",hideSecret:"Hide Secret",copySecret:"Copy Secret",copyToClipboard:"Copied to clipboard",regenerateSecret:"Regenerate Secret",regenerateSuccess:"Webhook secret regenerated successfully",webhookRegenerationWarning:"Are you sure? This will invalidate the old webhook secret.",webhookRegenerated:"Webhook secret regenerated!",failedToRegenerateWebhook:"Failed to regenerate webhook",statistics:"Statistics",totalDeployments:"Total Deployments",successRate:"Success Rate",avgDuration:"Average Duration",seconds:"seconds",queueStatus:"Queue Status",pendingItems:"Pending Items",baseInfo:"Basic Information",configuration:"Configuration",pipeline:"Pipeline",notifications:"Notifications",projectInfo:"Project Information",repoInfo:"Repository Information",configOptions:"Configuration Options",envVars:"Environment Variables",addVar:"Add Variable",removeVar:"Remove Variable",save:"Save",cancel:"Cancel",next:"Next",previous:"Previous",deployNow:"Deploy Now",manualDeploy:"Manual Deploy",currentBranch:"Current Branch",sshKeyManagement:"SSH Key Management",generateSshKey:"Generate SSH Key",regenerateKey:"Regenerate Key",sshKeyGenerated:"SSH key generated successfully! Copy the public key and add it to your GitHub repository.",sshKeyRegenerated:"SSH key regenerated successfully! Update the public key in your GitHub repository.",sshKeyDeleted:"SSH key deleted successfully!",publicKeyCopied:"Public key copied to clipboard!",noSshKeyConfigured:"No SSH key configured for this project. Generate an ED25519 SSH key to enable secure access to private GitHub repositories.",sshKeyInstructions:"After generating the SSH key, copy the public key and add it to your GitHub repository: Settings → Deploy Keys → Add deploy key (read-only access).",keyType:"Key Type",fingerprint:"Fingerprint",created:"Created",lastRotated:"Last Rotated",publicKey:"Public Key",confirmGenerateSshKey:"Generate SSH Key?",confirmRegenerateSshKey:"Regenerate SSH Key?",confirmDeleteSshKey:"Delete SSH Key?",generateSshKeyDescription:"This will generate a new ED25519 SSH key pair for this project. You will need to add the public key to your GitHub repository as a deploy key.",regenerateSshKeyWarning:"This will generate a new SSH key and invalidate the old one. You must update the deploy key in your GitHub repository. This action cannot be undone.",deleteSshKeyWarning:"This will delete the SSH key from this project. Deployments will fall back to HTTPS. This action cannot be undone.",processing:"Processing..."},Er={title:"Deployments",confirmRetry:"Are you sure you want to retry this deployment?",subtitle:"View and manage all deployments",description:"View and manage all deployments",deploy:"Deploy",status:"Status",project:"Project",branch:"Branch",commit:"Commit",commitHash:"Commit Hash",commitMessage:"Commit Message",triggeredBy:"Triggered By",duration:"Duration",startedAt:"Started At",completedAt:"Completed At",createdAt:"Created At",timestamp:"Timestamp",noDeployments:"No deployments found",noDeploymentsMessage:"No deployments found",noDeploymentsMatch:"No deployments match your filters",deployToSee:"Deploy a project to see it here",adjustFilters:"Try adjusting your search or filters",viewLogs:"View Logs",downloadLogs:"Download Logs",cancel:"Cancel",retry:"Retry",retryDeployment:"Retry Deployment",cancelAll:"Cancel All",refresh:"Refresh",filter:"Filter",search:"Search",searchPlaceholder:"Search by project or branch...",statusLabel:"Status",allStatuses:"All Statuses",success:"Success",failed:"Failed",inProgress:"In Progress",pending:"Pending",showing:"Showing",showingCount:"Showing {count} of {total} deployments",of:"of",deployments:"deployments",deploymentDetail:"Deployment Details",deploymentLogs:"Deployment Logs",logsTitle:"Deployment Logs",resultsShowing:"Showing {{count}} of {{total}} {{type}}",live:"Live",liveIndicator:"LIVE",terminal:"Terminal",filterByProject:"Filter by Project",filterByStatus:"Filter by Status",failedToLoad:"Failed to load deployment",notFound:"Deployment not found",startedSuccessfully:"Deployment started successfully!",failedToStart:"Failed to start deployment",statuses:{queued:"Queued",pending:"Pending",inProgress:"In Progress",success:"Success",failed:"Failed",cancelled:"Cancelled",rolled_back:"Rolled Back"},manualDeploy:{title:"Manual Deploy",description:"Deploy the project manually with custom settings",selectBranch:"Select Branch",commitHash:"Commit Hash (optional)",commitMessage:"Commit Message (optional)",advanced:"Advanced Options",advancedNote:"Additional options for deployment",deploying:"Deploying...",deploySuccess:"Deployment started successfully",deployError:"Failed to start deployment"}},Fr={title:"Deployment Logs",autoScroll:"Auto Scroll",searchInLogs:"Search in logs",clearSearch:"Clear search",noLogs:"No logs available",loadingLogs:"Loading logs...",logsError:"Error loading logs",downloadLogs:"Download Logs",openInNewTab:"Open in new tab",scrollToTop:"Scroll to top",scrollToBottom:"Scroll to bottom",fullTerminal:"Full Terminal",info:"Info",warning:"Warning",error:"Error",success:"Success"},Wr={title:"Reports",overview:"Overview",reportType:"Report Type",deploymentsByProject:"Deployments by Project",deploymentsByStatus:"Deployments by Status",successRate:"Success Rate",totalDuration:"Total Duration",averageDuration:"Average Duration",export:"Export Report",dateRange:"Date Range",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",lastMonth:"Last Month",customRange:"Custom Range",selectDateRange:"Select Date Range",generate:"Generate Report",downloadPdf:"Download PDF",downloadCsv:"Download CSV",deploymentsTrend:"Deployments Trend",projectStats:"Project Statistics",deploymentStats:"Deployment Statistics",timeStats:"Time Statistics",failureReasons:"Failure Reasons",success:"Success",failed:"Failed",pending:"Pending"},Lr={title:"Settings",subtitle:"Manage your account settings and preferences",profile:"Profile",preferences:"Preferences",notifications:"Notifications",security:"Security",account:"Account",appearance:"Appearance & Language",appearanceLanguage:"Appearance & Language",language:"Language",theme:"Theme",colorTheme:"Color Theme",colorThemeDesc:"Select your preferred color theme • Changes apply instantly",darkMode:"Dark Mode",darkModeOn:"Dark Mode On",darkModeOff:"Dark Mode Off",english:"English",arabic:"العربية (Arabic)",save:"Save",cancel:"Cancel",reset:"Reset",saveChanges:"Save Changes",saveNotificationSettings:"Save Notification Settings",saveNotifications:"Save Notification Settings",updatePassword:"Update Password",deleteAccount:"Delete Account",profileInformation:"Profile Information",notificationSettings:"Notification Settings",securitySettings:"Security Settings",accountManagement:"Account Management",updateProfile:"Update Profile",changeUsername:"Change Username",changeEmail:"Change Email",username:"Username",email:"Email",emailNotifications:"Email Notifications",emailNotificationsDesc:"Receive deployment notifications via email",receiveEmailNotifications:"Receive deployment notifications via email",discordWebhook:"Discord Webhook",slackWebhook:"Slack Webhook",webhookUrl:"Webhook URL",discordWebhookPlaceholder:"https://discord.com/api/webhooks/...",slackWebhookPlaceholder:"https://hooks.slack.com/services/...",changePassword:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmNewPassword:"Confirm New Password",enable2fa:"Enable Two-Factor Authentication",disable2fa:"Disable Two-Factor Authentication",twoFactorAuth:"Two-Factor Authentication",twoFactorDesc:"Add an extra layer of security to your account","2faEnabled":"Two-Factor Authentication Enabled","2faDisabled":"Two-Factor Authentication Disabled",generate2fa:"Generate 2FA Setup",scanQr:"Scan this QR code in your authenticator app",enterTotp:"Enter the 6-digit code",enterDisableCode:"Enter TOTP or backup code to disable",useTotpOrBackup:"Use your authenticator code or a backup code",backupCodes:"Backup Codes",backupCodesNote:"Store these codes safely. Each code can be used once.",regenerateBackupCodes:"Regenerate Backup Codes",backupCodesRegenerated:"Backup codes regenerated",enable2faDesc:"Add an extra layer of security to your account",dangerZone:"Danger Zone",deleteWarning:"Once you delete your account, there is no going back. Please be certain.",dangerZoneDesc:"Once you delete your account, there is no going back. Please be certain.",confirmDeleteAccount:"Are you sure you want to delete your account?",accountDeleted:"Account deleted successfully",settingsSaved:"Settings saved successfully",settingsSavedError:"Failed to save settings",passwordChanged:"Password changed successfully",passwordChangeError:"Failed to change password",profileUpdated:"Profile updated successfully!",languageUpdated:"Language updated successfully!",notificationsSaved:"Notification settings saved successfully!",colorThemeUpdated:"Color theme updated successfully",changesApplyImmediately:"Changes apply immediately",changesImmediate:"Changes apply immediately",changesApplyInstantly:"Changes apply instantly",selectPreferredColor:"Select your preferred color theme • Changes apply instantly",toggleTheme:"Toggle between light and dark theme",toggleThemeDesc:"Toggle between light and dark theme",fullName:"Full Name",lastLogin:"Last Login",memberSince:"Member Since",notAvailable:"N/A",timezone:"Timezone",dateFormat:"Date Format",timeFormat:"Time Format",notifySuccess:"Notify on success",notifyFailure:"Notify on failure",notifyProjectUpdates:"Project updates",notifySystemAlerts:"System alerts",testDiscord:"Test Discord",testSlack:"Test Slack",preferencesSaved:"Preferences saved successfully",saveFailed:"Failed to save changes",loadError:"Failed to load settings",testNotificationSent:"Test notification sent",passwordFieldsRequired:"Please fill all password fields",passwordMismatch:"New password and confirmation do not match",passwordUpdated:"Password updated successfully",apiKeys:"API Keys",sessions:"Sessions",generateApiKey:"Generate API Key",generate:"Generate",copy:"Copy",copyWarning:"Make sure to copy and store this key securely. It will not be shown again.",copyYourKey:"Copy your new API key",name:"Name",scopes:"Scopes",expiresAt:"Expires At",createdAt:"Created At",lastUsed:"Last Used",actions:"Actions",revoke:"Revoke",noApiKeys:"No API keys found",device:"Device",ipAddress:"IP Address",userAgent:"User Agent",lastActivity:"Last Activity",noSessions:"No active sessions",keepSession:"Keep Session",revokeAll:"Revoke All Other Sessions",apiKeyGenerated:"API key generated",apiKeyRevoked:"API key revoked",sessionRevoked:"Session revoked",sessionsRevoked:"Sessions updated",twoFactorComingSoon:"Two-factor authentication coming soon",deleteAccountConfirm:"Are you sure you want to delete your account?",deleteAccountFailed:"Failed to delete account",deleteAccountSuccess:"Account deletion requested"},Nr={title:"Notifications",config:"Notification Settings",triggers:"Notification Triggers",onStart:"On Start",onSuccess:"On Success",onFailure:"On Failure",discord:"Discord",slack:"Slack",telegram:"Telegram",email:"Email",webhookUrl:"Webhook URL",botToken:"Bot Token",chatId:"Chat ID",smtpHost:"SMTP Host",smtpPort:"SMTP Port",secure:"Secure (SSL/TLS)",username:"Username",password:"Password",from:"From",to:"To",testNotification:"Test Notification",notificationSent:"Notification sent successfully",notificationError:"Failed to send notification"},Mr={next:"Next",previous:"Previous",finish:"Finish",cancel:"Cancel",step:"Step",of:"of",step1:{title:"Basic Information",description:"Define your basic project information"},step2:{title:"Configuration",description:"Deployment and environment settings"},step3:{title:"Pipeline",description:"Define deployment steps"},step4:{title:"Notifications",description:"Setup deployment notifications"},saving:"Saving...",saved:"Saved successfully"},zr={title:"Pipeline Editor",addStep:"Add Step",removeStep:"Remove Step",moveUp:"Move Up",moveDown:"Move Down",stepName:"Step Name",command:"Command",workingDirectory:"Working Directory",timeout:"Timeout (ms)",runIf:"Run If",continueOnError:"Continue on Error",commands:{npmInstall:"Install dependencies",npmBuild:"Build project",npmStart:"Start project",pm2Restart:"Restart PM2",gitClone:"Clone repository"}},Br={loading:"Loading...",saving:"Saving...",error:"Error",success:"Success",warning:"Warning",info:"Info",confirm:"Confirm",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",view:"View",create:"Create",update:"Update",search:"Search",filter:"Filter",refresh:"Refresh",back:"Back",backToProjects:"Back to Projects",backToDeployments:"Back to Deployments",next:"Next",previous:"Previous",finish:"Finish",close:"Close",open:"Open",copy:"Copy",copyToClipboard:"Copy to clipboard",copiedToClipboard:"Copied to clipboard!",copied:"Copied",noData:"No data available",noResults:"No results found",empty:"Empty",full:"Full",enabled:"Enabled",disabled:"Disabled",active:"Active",inactive:"Inactive",activate:"Activate",deactivate:"Deactivate",status:"Status",actions:"Actions",details:"Details",settings:"Settings",configuration:"Configuration",general:"General",advanced:"Advanced",basic:"Basic",optional:"Optional",required:"Required",name:"Name",description:"Description",url:"URL",type:"Type",value:"Value",key:"Key",id:"ID",date:"Date",time:"Time",duration:"Duration",timestamp:"Timestamp",confirmDelete:"Are you sure you want to delete?",confirmDeleteDesc:"This action cannot be undone.",yes:"Yes",no:"No",ok:"OK",retry:"Retry",reload:"Reload",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",export:"Export",import:"Import",download:"Download",upload:"Upload",reset:"Reset",clear:"Clear",apply:"Apply",remove:"Remove",add:"Add",select:"Select",choose:"Choose",selectAll:"Select All",deselectAll:"Deselect All",all:"All",none:"None",other:"Other",total:"Total"},Ur={general:"An unexpected error occurred",somethingWrong:"Something went wrong",tryAgain:"Please try again later",network:"Network error. Please check your connection.",server:"Server error. Please try again later.",unauthorized:"Unauthorized. Please log in.",sessionExpired:"Your session has expired. Please log in again.",forbidden:"Access to this resource is forbidden.",notFound:"The requested resource was not found.",pageNotFound:"Page not found",validation:"Invalid data. Please check your inputs.",timeout:"Request timeout. Please try again.",tooManyRequests:"Too many requests. Please slow down.",conflict:"A conflict occurred. This action may have already been performed.",reloadPage:"Reload Page",backToHome:"Back to Home",contactSupport:"If the problem persists, please contact support.",required:"This field is required.",invalid:"Invalid value.",duplicate:"Value already exists.",notEnoughPermissions:"You don't have sufficient permissions.",maintenance:"Service is under maintenance. Please try again later.",rateLimit:"Rate limit exceeded. Please wait before retrying."},Kr={app:Dr,nav:Tr,auth:Ar,dashboard:Ir,projects:Rr,deployments:Er,logs:Fr,reports:Wr,settings:Lr,notifications:Nr,wizard:Mr,pipeline:zr,common:Br,error:Ur},Or={name:"مركز النشر",description:"منصة نشر شاملة"},Hr={dashboard:"لوحة التحكم",projects:"المشاريع",deployments:"عمليات النشر",reports:"التقارير",settings:"الإعدادات",logout:"تسجيل الخروج"},$r={login:"تسجيل الدخول",register:"إنشاء حساب",username:"اسم المستخدم",email:"البريد الإلكتروني",password:"كلمة المرور",totpCode:"رمز التحقق الثنائي",confirmPassword:"تأكيد كلمة المرور",role:"نوع الحساب",loginSuccess:"تم تسجيل الدخول بنجاح",loginError:"بيانات الدخول غير صحيحة",loginFailed:"فشل تسجيل الدخول. يرجى التحقق من بيانات الدخول.",registerSuccess:"تم إنشاء الحساب بنجاح",registerError:"فشل إنشاء الحساب",logout:"تسجيل الخروج",logoutSuccess:"تم تسجيل الخروج بنجاح",usernameRequired:"اسم المستخدم مطلوب",passwordRequired:"كلمة المرور مطلوبة",emailRequired:"البريد الإلكتروني مطلوب",loginSubtitle:"تسجيل الدخول إلى حسابك",registerSubtitle:"إنشاء حساب جديد للبدء",createAccount:"إنشاء حساب",noAccount:"ليس لديك حساب؟",haveAccount:"لديك حساب بالفعل؟",loggingIn:"جاري تسجيل الدخول...",registering:"جاري إنشاء الحساب...",totpRequired:"رمز التحقق الثنائي مطلوب",totpPrompt:"أدخل رمز التحقق الثنائي للمتابعة",changePassword:"تغيير كلمة المرور",oldPassword:"كلمة المرور القديمة",newPassword:"كلمة المرور الجديدة",currentPassword:"كلمة المرور الحالية",confirmNewPassword:"تأكيد كلمة المرور الجديدة",passwordStrength:"قوة كلمة المرور",weak:"ضعيفة",fair:"متوسطة",good:"جيدة",strong:"قوية"},qr={title:"لوحة التحكم",subtitle:"نظرة عامة على منصة النشر الخاصة بك",welcome:"مرحباً",totalProjects:"إجمالي المشاريع",activeProjects:"المشاريع النشطة",totalDeployments:"إجمالي عمليات النشر",successfulDeployments:"الناجحة",failedDeployments:"الفاشلة",averageDuration:"متوسط المدة",recentDeployments:"عمليات النشر الأخيرة",deploymentsTrend:"اتجاه عمليات النشر",queueSize:"حجم قائمة الانتظار",globalStats:"الإحصائيات العامة"},Gr={title:"المشاريع",subtitle:"إدارة مشاريع النشر",createProject:"إنشاء مشروع",editProject:"تعديل مشروع",deleteProject:"حذف مشروع",projectName:"اسم المشروع",repoUrl:"رابط المستودع",branch:"الفرع",projectPath:"مسار المشروع",projectType:"نوع المشروع",description:"الوصف",isActive:"مشروع نشط",inactive:"غير نشط",actions:"الإجراءات",view:"عرض",edit:"تعديل",delete:"حذف",deploy:"نشر",viewDetails:"عرض التفاصيل",noProjects:"لا توجد مشاريع",noProjectsFound:"لم يتم العثور على مشاريع",createSuccess:"تم إنشاء المشروع بنجاح",updateSuccess:"تم تحديث المشروع بنجاح",deleteSuccess:"تم حذف المشروع بنجاح",createError:"فشل إنشاء المشروع",updateError:"فشل تحديث المشروع",deleteError:"فشل حذف المشروع",failedToLoad:"فشل تحميل المشاريع",failedToLoadDetails:"فشل تحميل تفاصيل المشروع",failedToDelete:"فشل حذف المشروع",createFirstProject:"أنشئ أول مشروع للبدء",confirmDelete:"هل أنت متأكد من حذف هذا المشروع؟",confirmDeleteDesc:"سيتم حذف جميع عمليات النشر المتعلقة بهذا المشروع ولن يمكن التراجع عن هذا الإجراء.",deploymentStarted:"بدأت عملية النشر بنجاح",webhookRegenerationWarning:"هل أنت متأكد؟ سيتم إبطال سر الـ Webhook القديم.",webhookRegenerated:"تم إعادة توليد سر الـ Webhook!",failedToRegenerateWebhook:"فشل في إعادة توليد سر الـ Webhook",webhook:"Webhook",webhookSecret:"سر الـ Webhook",showSecret:"إظهار السر",hideSecret:"إخفاء السر",copySecret:"نسخ السر",copyToClipboard:"تم نسخه إلى الحافظة",regenerateSecret:"إعادة توليد السر",regenerateSuccess:"تم إعادة توليد سر الـ Webhook",statistics:"الإحصائيات",totalDeployments:"إجمالي عمليات النشر",successRate:"معدل النجاح",avgDuration:"متوسط المدة",seconds:"ثانية",queueStatus:"حالة قائمة الانتظار",pendingItems:"عناصر معلقة",baseInfo:"البيانات الأساسية",configuration:"الإعدادات",pipeline:"خط الأنابيب",notifications:"الإشعارات",projectInfo:"معلومات المشروع",repoInfo:"معلومات المستودع",configOptions:"خيارات الإعدادات",envVars:"المتغيرات البيئية",addVar:"إضافة متغير",removeVar:"إزالة متغير",save:"حفظ",cancel:"إلغاء",next:"التالي",previous:"السابق",deployNow:"نشر الآن",manualDeploy:"نشر يدوي",currentBranch:"الفرع الحالي",sshKeyManagement:"إدارة مفاتيح SSH",generateSshKey:"توليد مفتاح SSH",regenerateKey:"إعادة توليد المفتاح",sshKeyGenerated:"تم توليد مفتاح SSH بنجاح! انسخ المفتاح العام وأضفه إلى مستودع GitHub الخاص بك.",sshKeyRegenerated:"تم إعادة توليد مفتاح SSH بنجاح! حدّث المفتاح العام في مستودع GitHub الخاص بك.",sshKeyDeleted:"تم حذف مفتاح SSH بنجاح!",publicKeyCopied:"تم نسخ المفتاح العام إلى الحافظة!",noSshKeyConfigured:"لا يوجد مفتاح SSH مُهيأ لهذا المشروع. قم بتوليد مفتاح ED25519 SSH لتفعيل الوصول الآمن إلى مستودعات GitHub الخاصة.",sshKeyInstructions:"بعد توليد مفتاح SSH، انسخ المفتاح العام وأضفه إلى مستودع GitHub الخاص بك: الإعدادات ← Deploy Keys ← إضافة مفتاح النشر (وصول للقراءة فقط).",keyType:"نوع المفتاح",fingerprint:"البصمة",created:"تم الإنشاء",lastRotated:"آخر تدوير",publicKey:"المفتاح العام",confirmGenerateSshKey:"توليد مفتاح SSH؟",confirmRegenerateSshKey:"إعادة توليد مفتاح SSH؟",confirmDeleteSshKey:"حذف مفتاح SSH؟",generateSshKeyDescription:"سيتم توليد زوج مفاتيح SSH ED25519 جديد لهذا المشروع. ستحتاج إلى إضافة المفتاح العام إلى مستودع GitHub الخاص بك كمفتاح نشر.",regenerateSshKeyWarning:"سيتم توليد مفتاح SSH جديد وإبطال المفتاح القديم. يجب عليك تحديث مفتاح النشر في مستودع GitHub الخاص بك. لا يمكن التراجع عن هذا الإجراء.",deleteSshKeyWarning:"سيتم حذف مفتاح SSH من هذا المشروع. ستعود عمليات النشر إلى استخدام HTTPS. لا يمكن التراجع عن هذا الإجراء.",processing:"جاري المعالجة..."},Yr={title:"عمليات النشر",confirmRetry:"هل أنت متأكد من إعادة المحاولة؟",description:"عرض وإدارة جميع عمليات النشر",deploy:"نشر",status:"الحالة",project:"المشروع",branch:"الفرع",commit:"الكميت",commitHash:"هاش الكميت",commitMessage:"رسالة الكميت",triggeredBy:"تم الإطلاق بواسطة",duration:"المدة",startedAt:"بدأت في",completedAt:"انتهت في",createdAt:"أُنشئت في",timestamp:"الطابع الزمني",noDeployments:"لا توجد عمليات نشر",noDeploymentsMessage:"لم يتم العثور على عمليات نشر",noDeploymentsMatch:"لا توجد عمليات نشر تطابق المرشحات",deployToSee:"انشر مشروعاً لترىه هنا",adjustFilters:"حاول تعديل البحث أو المرشحات",viewLogs:"عرض السجلات",downloadLogs:"تحميل السجلات",cancel:"إلغاء",retry:"إعادة المحاولة",cancelAll:"إلغاء الكل",refresh:"تحديث",filter:"تصفية",search:"البحث",searchPlaceholder:"البحث بالمشروع أو الفرع...",statusLabel:"الحالة",allStatuses:"جميع الحالات",success:"نجحت",failed:"فشلت",inProgress:"قيد التنفيذ",pending:"معلقة",showing:"يعرض",of:"من",deployments:"عمليات نشر",deploymentDetail:"تفاصيل عملية النشر",deploymentLogs:"سجلات عملية النشر",resultsShowing:"يعرض {{count}} من {{total}} {{type}}",live:"مباشر",terminal:"الطرفية",filterByProject:"تصفية حسب المشروع",filterByStatus:"تصفية حسب الحالة",startedSuccessfully:"بدأت عملية النشر بنجاح",failedToStart:"فشل في بدء عملية النشر",failedToLoad:"فشل تحميل عمليات النشر",notFound:"لم يتم العثور على عملية النشر",logsTitle:"سجلات النشر #{{id}}",liveIndicator:"مباشر",retryDeployment:"إعادة محاولة النشر",showingCount:"يعرض {{showing}} من {{total}} عمليات نشر",statuses:{queued:"في الانتظار",pending:"معلقة",inProgress:"قيد التنفيذ",success:"نجحت",failed:"فشلت",cancelled:"ملغاة",rolled_back:"تم التراجع"},manualDeploy:{title:"نشر يدوي",description:"نشر المشروع يدوياً مع إعدادات مخصصة",selectBranch:"اختر الفرع",commitHash:"هاش الكميت (اختياري)",commitMessage:"رسالة الكميت (اختياري)",advanced:"خيارات متقدمة",advancedNote:"خيارات إضافية لعملية النشر",deploying:"جاري النشر...",deploySuccess:"تم بدء النشر بنجاح",deployError:"فشل في بدء النشر"}},Vr={title:"سجلات النشر",autoScroll:"تمرير تلقائي",searchInLogs:"البحث في السجلات",clearSearch:"مسح البحث",noLogs:"لا توجد سجلات",loadingLogs:"جاري تحميل السجلات...",logsError:"خطأ في تحميل السجلات",downloadLogs:"تحميل السجلات",openInNewTab:"فتح في تبويب جديد",scrollToTop:"التمرير لأعلى",scrollToBottom:"التمرير لأسفل",fullTerminal:"الطرفية الكاملة",info:"معلومات",warning:"تحذير",error:"خطأ",success:"نجاح"},_r={title:"التقارير",overview:"نظرة عامة",deploymentsByProject:"عمليات النشر حسب المشروع",deploymentsByStatus:"عمليات النشر حسب الحالة",successRate:"معدل النجاح",totalDuration:"إجمالي المدة",averageDuration:"متوسط المدة",export:"تصدير التقرير",dateRange:"نطاق التاريخ",last7Days:"آخر 7 أيام",last30Days:"آخر 30 يوم",thisMonth:"هذا الشهر",lastMonth:"الشهر الماضي",customRange:"نطاق مخصص",selectDateRange:"اختر نطاق التاريخ",generate:"إنشاء التقرير",downloadPdf:"تحميل PDF",downloadCsv:"تحميل CSV",deploymentsTrend:"اتجاه عمليات النشر",projectStats:"إحصائيات المشاريع",deploymentStats:"إحصائيات عمليات النشر",timeStats:"إحصائيات الوقت",failureReasons:"أسباب الفشل",reportType:"نوع التقرير",success:"ناجحة",failed:"فاشلة",pending:"معلقة"},Qr={title:"الإعدادات",subtitle:"إدارة إعدادات حسابك والتفضيلات",profile:"الملف الشخصي",preferences:"التفضيلات",notifications:"الإشعارات",security:"الأمان",account:"الحساب",appearance:"المظهر واللغة",language:"اللغة",theme:"السمة",colorTheme:"سمة الألوان",darkMode:"الوضع المظلم",darkModeOn:"الوضع المظلم مفعل",darkModeOff:"الوضع المظلم معطل",english:"الإنجليزية",arabic:"العربية",save:"حفظ",cancel:"إلغاء",reset:"إعادة تعيين",saveChanges:"حفظ التغييرات",saveNotificationSettings:"حفظ إعدادات الإشعارات",updatePassword:"تحديث كلمة المرور",deleteAccount:"حذف الحساب",profileInformation:"معلومات الملف الشخصي",appearanceLanguage:"المظهر واللغة",notificationSettings:"إعدادات الإشعارات",securitySettings:"إعدادات الأمان",accountManagement:"إدارة الحساب",updateProfile:"تحديث الملف الشخصي",changeUsername:"تغيير اسم المستخدم",changeEmail:"تغيير البريد الإلكتروني",username:"اسم المستخدم",email:"البريد الإلكتروني",emailNotifications:"إشعارات البريد الإلكتروني",receiveEmailNotifications:"تلقي إشعارات النشر عبر البريد الإلكتروني",discordWebhook:"Webhook Discord",slackWebhook:"Webhook Slack",webhookUrl:"رابط الـ Webhook",discordWebhookPlaceholder:"https://discord.com/api/webhooks/...",slackWebhookPlaceholder:"https://hooks.slack.com/services/...",changePassword:"تغيير كلمة المرور",currentPassword:"كلمة المرور الحالية",newPassword:"كلمة المرور الجديدة",confirmNewPassword:"تأكيد كلمة المرور الجديدة",enable2fa:"تفعيل التحقق الثنائي",disable2fa:"تعطيل التحقق الثنائي","2faEnabled":"التحقق الثنائي مفعل","2faDisabled":"التحقق الثنائي معطل",enable2faDesc:"إضافة طبقة إضافية لأمان الحساب",twoFactorAuth:"التحقق الثنائي",generate2fa:"إنشاء إعداد 2FA",scanQr:"امسح رمز QR في تطبيق المصادقة",enterTotp:"أدخل الكود المكون من 6 أرقام",enterDisableCode:"أدخل كود TOTP أو كود احتياطي للتعطيل",useTotpOrBackup:"استخدم كود التطبيق أو أحد الأكواد الاحتياطية",backupCodes:"الأكواد الاحتياطية",backupCodesNote:"احفظ هذه الأكواد بأمان. كل كود يُستخدم مرة واحدة فقط.",regenerateBackupCodes:"إعادة إنشاء الأكواد الاحتياطية",backupCodesRegenerated:"تم إنشاء الأكواد الاحتياطية",twoFactorDesc:"إضافة طبقة إضافية من الأمان لحسابك",deleteWarning:"تحذير: هذا الإجراء لا يمكن التراجع عنه. سيتم حذف جميع مشاريعك وعمليات النشر نهائياً.",dangerZone:"منطقة الخطر",dangerZoneDesc:"بمجرد حذف حسابك، لا يمكن العودة. يرجى التأكد.",confirmDeleteAccount:"هل أنت متأكد من حذف حسابك؟",accountDeleted:"تم حذف الحساب بنجاح",settingsSaved:"تم حفظ الإعدادات بنجاح",settingsSavedError:"فشل في حفظ الإعدادات",passwordChanged:"تم تغيير كلمة المرور بنجاح",passwordChangeError:"فشل في تغيير كلمة المرور",profileUpdated:"تم تحديث الملف الشخصي بنجاح",languageUpdated:"تم تحديث اللغة بنجاح",notificationsSaved:"تم حفظ إعدادات الإشعارات بنجاح",colorThemeUpdated:"تم تحديث سمة الألوان بنجاح",changesApplyImmediately:"يتم تطبيق التغييرات فوراً",changesApplyInstantly:"يتم تطبيق التغييرات فوراً",selectPreferredColor:"اختر سمة الألوان المفضلة • يتم تطبيق التغييرات فوراً",toggleTheme:"التغيير بين السمة الفاتحة والداكنة",fullName:"الاسم الكامل",lastLogin:"آخر تسجيل دخول",memberSince:"عضو منذ",notAvailable:"غير متوفر",timezone:"المنطقة الزمنية",dateFormat:"صيغة التاريخ",timeFormat:"صيغة الوقت",notifySuccess:"إشعار عند النجاح",notifyFailure:"إشعار عند الفشل",notifyProjectUpdates:"تحديثات المشاريع",notifySystemAlerts:"تنبيهات النظام",testDiscord:"اختبار Discord",testSlack:"اختبار Slack",preferencesSaved:"تم حفظ التفضيلات بنجاح",saveFailed:"فشل في حفظ التغييرات",loadError:"فشل في تحميل الإعدادات",testNotificationSent:"تم إرسال إشعار تجريبي",passwordFieldsRequired:"يرجى تعبئة جميع حقول كلمة المرور",passwordMismatch:"كلمة المرور الجديدة وتأكيدها غير متطابقين",passwordUpdated:"تم تحديث كلمة المرور بنجاح",apiKeys:"مفاتيح API",sessions:"الجلسات",generateApiKey:"إنشاء مفتاح API",generate:"إنشاء",copy:"نسخ",copyWarning:"احرص على نسخ المفتاح وتخزينه بأمان. لن يظهر مرة أخرى.",copyYourKey:"انسخ مفتاحك الجديد",name:"الاسم",scopes:"الصلاحيات",expiresAt:"تاريخ الانتهاء",createdAt:"تاريخ الإنشاء",lastUsed:"آخر استخدام",actions:"إجراءات",revoke:"إلغاء",noApiKeys:"لا توجد مفاتيح API",device:"الجهاز",ipAddress:"عنوان IP",userAgent:"وصف المتصفح",lastActivity:"آخر نشاط",noSessions:"لا توجد جلسات نشطة",keepSession:"الجلسة المطلوب الاحتفاظ بها",revokeAll:"إلغاء كل الجلسات الأخرى",apiKeyGenerated:"تم إنشاء مفتاح API",apiKeyRevoked:"تم إلغاء مفتاح API",sessionRevoked:"تم إلغاء الجلسة",sessionsRevoked:"تم تحديث الجلسات",twoFactorComingSoon:"التحقق الثنائي قادم قريباً",deleteAccountConfirm:"هل أنت متأكد من حذف حسابك؟",deleteAccountFailed:"فشل حذف الحساب",deleteAccountSuccess:"تم إرسال طلب حذف الحساب"},Zr={title:"الإشعارات",config:"إعدادات الإشعارات",triggers:"محفزات الإشعارات",onStart:"عند البدء",onSuccess:"عند النجاح",onFailure:"عند الفشل",discord:"ديسكورد",slack:"سلاك",telegram:"تليجرام",email:"البريد الإلكتروني",webhookUrl:"رابط الـ Webhook",botToken:"رمز البوت",chatId:"معرف الدردشة",smtpHost:"خادم SMTP",smtpPort:"منفذ SMTP",secure:"آمن (SSL/TLS)",username:"اسم المستخدم",password:"كلمة المرور",from:"من",to:"إلى",testNotification:"اختبار الإشعار",notificationSent:"تم إرسال الإشعار بنجاح",notificationError:"فشل في إرسال الإشعار"},Xr={next:"التالي",previous:"السابق",finish:"إنهاء",cancel:"إلغاء",step:"الخطوة",of:"من",step1:{title:"المعلومات الأساسية",description:"قم بتعريف مشروعك الأساسي"},step2:{title:"الإعدادات الرئيسية",description:"إعدادات النشر والبيئة"},step3:{title:"خط الأنابيب",description:"تحديد خطوات النشر"},step4:{title:"الإشعارات",description:"إعدادات إشعارات النشر"},saving:"جاري الحفظ...",saved:"تم الحفظ بنجاح"},Jr={title:"محرر خط الأنابيب",addStep:"إضافة خطوة",removeStep:"إزالة الخطوة",moveUp:"نقل لأعلى",moveDown:"نقل لأسفل",stepName:"اسم الخطوة",command:"الأمر",workingDirectory:"مجلد العمل",timeout:"مهلة (مللي ثانية)",runIf:"شرط التشغيل",continueOnError:"استمرار عند الخطأ",commands:{npmInstall:"تثبيت dependencies",npmBuild:"بناء المشروع",npmStart:"تشغيل المشروع",pm2Restart:"إعادة تشغيل PM2",gitClone:"استنساخ المستودع"}},eo={loading:"جاري التحميل...",saving:"جاري الحفظ...",error:"خطأ",success:"نجاح",warning:"تحذير",info:"معلومات",confirm:"تأكيد",cancel:"إلغاء",save:"حفظ",delete:"حذف",edit:"تعديل",view:"عرض",create:"إنشاء",update:"تحديث",search:"بحث",filter:"تصفية",refresh:"تحديث",back:"رجوع",next:"التالي",previous:"السابق",finish:"إنهاء",close:"إغلاق",open:"فتح",copy:"نسخ",copyToClipboard:"نسخ إلى الحافظة",copied:"تم النسخ",backToProjects:"العودة للمشاريع",backToDeployments:"العودة لعمليات النشر",copiedToClipboard:"تم النسخ إلى الحافظة",total:"الإجمالي",noData:"لا توجد بيانات",noResults:"لا توجد نتائج",empty:"فارغ",full:"ممتلئ",enabled:"مفعل",disabled:"معطل",active:"نشط",inactive:"غير نشط",activate:"تفعيل",deactivate:"إلغاء التفعيل",status:"الحالة",actions:"الإجراءات",details:"التفاصيل",settings:"الإعدادات",configuration:"الإعدادات",general:"عام",advanced:"متقدم",basic:"أساسي",optional:"اختياري",required:"مطلوب",name:"الاسم",description:"الوصف",url:"الرابط",type:"النوع",value:"القيمة",key:"المفتاح",id:"المعرف",date:"التاريخ",time:"الوقت",duration:"المدة",timestamp:"الطابع الزمني",confirmDelete:"هل أنت متأكد من الحذف؟",confirmDeleteDesc:"هذا الإجراء لا يمكن التراجع عنه.",yes:"نعم",no:"لا",ok:"موافق",retry:"إعادة المحاولة",reload:"إعادة تحميل",show:"إظهار",hide:"إخفاء",expand:"توسيع",collapse:"طي",export:"تصدير",import:"استيراد",download:"تحميل",upload:"رفع",reset:"إعادة تعيين",clear:"مسح",apply:"تطبيق",remove:"إزالة",add:"إضافة",select:"اختر",choose:"اختر",selectAll:"تحديد الكل",deselectAll:"إلغاء تحديد الكل",all:"الكل",none:"لا يوجد",other:"أخرى"},to={general:"حدث خطأ غير متوقع",somethingWrong:"حدث خطأ ما",tryAgain:"يرجى المحاولة مرة أخرى لاحقاً",network:"خطأ في الشبكة. يرجى التحقق من الاتصال.",server:"خطأ في الخادم. يرجى المحاولة لاحقاً.",unauthorized:"غير مصرح. يرجى تسجيل الدخول.",sessionExpired:"انتهت صلاحية جلستك. يرجى تسجيل الدخول مرة أخرى.",forbidden:"الوصول إلى هذا المورد ممنوع.",notFound:"المورد المطلوب غير موجود.",pageNotFound:"الصفحة غير موجودة",validation:"بيانات غير صالحة. يرجى التحقق من المدخلات.",timeout:"انتهى وقت الطلب. يرجى المحاولة مرة أخرى.",tooManyRequests:"طلبات كثيرة جداً. يرجى التباطؤ.",conflict:"حدث تعارض. قد يكون هذا الإجراء قد تم بالفعل.",reloadPage:"إعادة تحميل الصفحة",backToHome:"العودة للرئيسية",contactSupport:"إذا استمرت المشكلة، يرجى الاتصال بالدعم.",required:"هذا الحقل مطلوب.",invalid:"قيمة غير صحيحة.",duplicate:"قيمة موجودة بالفعل.",notEnoughPermissions:"ليس لديك صلاحيات كافية.",maintenance:"الخدمة في صيانة. يرجى المحاولة لاحقاً.",rateLimit:"تم تجاوز حد التكرار. يرجى الانتظار قبل إعادة المحاولة."},so={app:Or,nav:Hr,auth:$r,dashboard:qr,projects:Gr,deployments:Yr,logs:Vr,reports:_r,settings:Qr,notifications:Zr,wizard:Xr,pipeline:Jr,common:eo,error:to},Ms=localStorage.getItem("deploy_center_language")||"en";yn.use(fn).use(cn).init({resources:{en:{translation:Kr},ar:{translation:so}},lng:Ms,fallbackLng:"en",detection:{order:["localStorage","navigator","htmlTag"],lookupLocalStorage:"deploy_center_language",caches:["localStorage"]},interpolation:{escapeValue:!1},react:{useSuspense:!1}});Ms==="ar"?(document.body.setAttribute("dir","rtl"),document.body.classList.add("rtl")):(document.body.setAttribute("dir","ltr"),document.body.classList.remove("rtl"));const Vt={Api:{BaseUrl:"http://localhost:9090/api",Timeout:3e4},Socket:{Url:"http://localhost:9090",Path:"/v1/ws"}},no=()=>`${Date.now()}-${Math.random().toString(36).substring(2,15)}`,ro=()=>bn.get("XSRF-TOKEN"),A=jn.create({baseURL:Vt.Api.BaseUrl,timeout:Vt.Api.Timeout,headers:{"Content-Type":"application/json"},withCredentials:!0});A.interceptors.request.use(t=>{const s=t.headers;if(["post","put","patch","delete"].includes(t.method?.toLowerCase()||"")){const n=ro();n&&(s["X-XSRF-TOKEN"]=n),["post","put","patch"].includes(t.method?.toLowerCase()||"")&&(s["Idempotency-Key"]||(s["Idempotency-Key"]=no()))}return t},t=>Promise.reject(t));let Ht=!1,ds=[];const Ss=(t=null)=>{ds.forEach(s=>{t?s.reject(t):s.resolve()}),ds=[]};A.interceptors.response.use(t=>t,async t=>{const s=t.config,n=t.response?.data?.Message||"An unexpected error occurred";if(t.response?.status===401&&s&&!s._retry){if(s.url?.includes("/auth/login")||s.url?.includes("/auth/register")||s.url?.includes("/auth/refresh"))return localStorage.removeItem("user_preferences"),window.location.pathname.includes("/login")||(window.location.href="/login"),Promise.reject(t);if(Ht)return new Promise((r,a)=>{ds.push({resolve:r,reject:a})}).then(()=>A(s)).catch(r=>Promise.reject(r));s._retry=!0,Ht=!0;try{return await A.post("/auth/refresh",{}),Ss(null),Ht=!1,A(s)}catch(r){return Ss(r),Ht=!1,localStorage.removeItem("user_preferences"),window.location.pathname.includes("/login")||(window.location.href="/login"),Promise.reject(r)}}return t.response?.status===403&&(n.toLowerCase().includes("csrf")||n.toLowerCase().includes("token")),t.response?.status,t.response?.status,t.response?.status,t.response?.status,t.response&&t.response.status>=500,t.response,Promise.reject(t)});class oo{async Login(s){const n=await A.post("/auth/login",s),r=n.data.Data;if(r?.TwoFactorRequired)return{TwoFactorRequired:!0,UserId:r.UserId,Username:r.Username};if(r?.User)return r;throw new Error(n.data.Message||"Login failed")}async Register(s){const n=await A.post("/auth/register",s);if(n.data.Data)return n.data.Data;throw new Error(n.data.Message||"Registration failed")}async GetProfile(){const s=await A.get("/auth/profile");if(s.data.Data)return s.data.Data;throw new Error(s.data.Message||"Failed to get profile")}async Logout(){await A.post("/auth/logout")}async RefreshToken(s){const n=s?{RefreshToken:s}:{},r=await A.post("/auth/refresh",n);if(r.data?.Message&&r.data.Code&&r.data.Code>=400)throw new Error(r.data.Message||"Token refresh failed")}async Verify2FA(s,n){const r=await A.post("/auth/verify-2fa",{UserId:s,Code:n});if(r.data.Data)return r.data.Data;throw new Error(r.data.Message||"2FA verification failed")}}const Ze=new oo,zs=i.createContext(void 0),ao=({children:t})=>{const[s,n]=i.useState(null),[r,a]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const w=await Ze.GetProfile();n(w)}catch{n(null)}finally{a(!1)}})()},[]);const y={User:s,IsAuthenticated:!!s,IsLoading:r,Login:async m=>{try{const w=await Ze.Login(m);return"User"in w&&n(w.User),w}catch(w){throw console.error("Login error:",w),w}},Verify2FA:async(m,w)=>{try{a(!0);const S=await Ze.Verify2FA(m,w);return n(S.User),S}catch(S){throw console.error("2FA verification error:",S),S}finally{a(!1)}},Register:async m=>{try{a(!0);const w=await Ze.Register(m);n(w.User)}catch(w){throw console.error("Registration error:",w),w}finally{a(!1)}},Logout:async()=>{try{await Ze.Logout()}catch(m){console.error("Logout API error:",m)}finally{n(null)}},RefreshUser:async()=>{try{const m=await Ze.GetProfile();n(m)}catch(m){throw console.error("Failed to refresh user:",m),n(null),m}}};return e.jsx(zs.Provider,{value:y,children:t})},Fe=()=>{const t=i.useContext(zs);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Bs={blue:{primary:"#1976d2",secondary:"#dc004e"},green:{primary:"#4caf50",secondary:"#ff9800"},purple:{primary:"#9c27b0",secondary:"#00bcd4"},orange:{primary:"#ff9800",secondary:"#3f51b5"},red:{primary:"#f44336",secondary:"#4caf50"}},io=(t,s="blue")=>{const n=Bs[s],r={direction:"ltr",palette:{mode:t,primary:{main:n.primary},secondary:{main:n.secondary},background:{default:t==="dark"?"#121212":"#f5f5f5",paper:t==="dark"?"#1e1e1e":"#ffffff"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},components:{MuiCssBaseline:{styleOverrides:a=>({body:{direction:"ltr",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',scrollbarColor:a.palette.mode==="dark"?"#6b6b6b #2b2b2b":"#959595 #f1f1f1","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:a.palette.mode==="dark"?"#2b2b2b":"#f1f1f1"},"&::-webkit-scrollbar-thumb":{background:a.palette.mode==="dark"?"#6b6b6b":"#959595",borderRadius:"4px"}}})},MuiButton:{styleOverrides:{root:{textTransform:"none"}}}}};return Sn(r)};var $t={exports:{}};var vs;function lo(){return vs||(vs=1,(function(t,s){var n;function r(d,x){var o=[],h=0;function b(m){return o.push(m),x}function y(){return o[h++]}return{tokenize:function(m){return m.replace(d,b)},detokenize:function(m){return m.replace(new RegExp("("+x+")","g"),y)}}}function a(){var d="`TMP`",x="`TMPLTR`",o="`TMPRTL`",h="`NOFLIP_SINGLE`",b="`NOFLIP_CLASS`",y="`COMMENT`",m="[^\\u0020-\\u007e]",w="(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)",S="(?:[0-9]*\\.[0-9]+|[0-9]+)",j="(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)",v="direction\\s*:\\s*",T="[!#$%&*-~]",g=`['"]?\\s*`,u="(^|[^a-zA-Z])",p="[^\\}]*?",f="\\/\\*\\!?\\s*@noflip\\s*\\*\\/",P="\\/\\*[^*]*\\*+([^\\/*][^*]*\\*+)*\\/",C="(?:"+w+"|\\\\[^\\r\\n\\f0-9a-f])",B="(?:[_a-z]|"+m+"|"+C+")",H="(?:[_a-z0-9-]|"+m+"|"+C+")",K="-?"+B+H+"*",Q=S+"(?:\\s*"+j+"|"+K+")?",k="((?:-?"+Q+")|(?:inherit|auto))",M="(?:-?"+S+"(?:\\s*"+j+")?)",E="(?:\\+|\\-|\\*|\\/)",je="(?:\\(|\\)|\\t| )",be="(?:"+je+"|"+M+"|"+E+"){3,}",We="(?:calc\\((?:"+be+")\\))",z="((?:-?"+Q+")|(?:inherit|auto)|"+We+")",ne="((?:margin|padding|border-width)\\s*:\\s*)",F="((?:-color|border-style)\\s*:\\s*)",V="(#?"+H+"+|(?:rgba?|hsla?)\\([ \\d.,%-]+\\))",Ie="(?:"+T+"|"+m+"|"+C+")*?",nt="(?![a-zA-Z])",$e="(?!("+H+`|\\r?\\n|\\s|#|\\:|\\.|\\,|\\+|>|~|\\(|\\)|\\[|\\]|=|\\*=|~=|\\^=|'[^']*'|"[^"]*"|`+y+")*?{)",rt="(?!"+Ie+g+"\\))",Le="(?="+Ie+g+"\\))",qe="(\\s*(?:!important\\s*)?[;}])",Re=/`TMP`/g,Xt=/`TMPLTR`/g,Jt=/`TMPRTL`/g,es=new RegExp(P,"gi"),ts=new RegExp("("+f+$e+"[^;}]+;?)","gi"),bt=new RegExp("("+f+p+"})","gi"),St=new RegExp("("+v+")ltr","gi"),vt=new RegExp("("+v+")rtl","gi"),wt=new RegExp(u+"(left)"+nt+rt+$e,"gi"),Ct=new RegExp(u+"(right)"+nt+rt+$e,"gi"),kt=new RegExp(u+"(left)"+Le,"gi"),Pt=new RegExp(u+"(right)"+Le,"gi"),Dt=/(:dir\( *)ltr( *\))/g,Tt=/(:dir\( *)rtl( *\))/g,At=new RegExp(u+"(ltr)"+Le,"gi"),It=new RegExp(u+"(rtl)"+Le,"gi"),Rt=new RegExp(u+"([ns]?)e-resize","gi"),Et=new RegExp(u+"([ns]?)w-resize","gi"),Ft=new RegExp(ne+z+"(\\s+)"+z+"(\\s+)"+z+"(\\s+)"+z+qe,"gi"),Wt=new RegExp(F+V+"(\\s+)"+V+"(\\s+)"+V+"(\\s+)"+V+qe,"gi"),Lt=new RegExp("(background(?:-position)?\\s*:\\s*(?:[^:;}\\s]+\\s+)*?)("+Q+")","gi"),Nt=new RegExp("(background-position-x\\s*:\\s*)(-?"+S+"%)","gi"),Mt=new RegExp("(border-radius\\s*:\\s*)"+k+"(?:(?:\\s+"+k+")(?:\\s+"+k+")?(?:\\s+"+k+")?)?(?:(?:(?:\\s*\\/\\s*)"+k+")(?:\\s+"+k+")?(?:\\s+"+k+")?(?:\\s+"+k+")?)?"+qe,"gi"),zt=new RegExp("(box-shadow\\s*:\\s*(?:inset\\s*)?)"+k,"gi"),Bt=new RegExp("(text-shadow\\s*:\\s*)"+k+"(\\s*)"+V,"gi"),ot=new RegExp("(text-shadow\\s*:\\s*)"+V+"(\\s*)"+k,"gi"),Ut=new RegExp("(text-shadow\\s*:\\s*)"+k,"gi"),Ge=new RegExp("(transform\\s*:[^;}]*)(translateX\\s*\\(\\s*)"+k+"(\\s*\\))","gi"),Kt=new RegExp("(transform\\s*:[^;}]*)(translate\\s*\\(\\s*)"+k+"((?:\\s*,\\s*"+k+"){0,2}\\s*\\))","gi");function Ye(L,ie,G){var ee,le;return G.slice(-1)==="%"&&(ee=G.indexOf("."),ee!==-1?(le=G.length-ee-2,G=100-parseFloat(G),G=G.toFixed(le)+"%"):G=100-parseFloat(G)+"%"),ie+G}function Ve(L){switch(L.length){case 4:L=[L[1],L[0],L[3],L[2]];break;case 3:L=[L[1],L[0],L[1],L[2]];break;case 2:L=[L[1],L[0]];break;case 1:L=[L[0]];break}return L.join(" ")}function ss(L,ie){var G,ee=[].slice.call(arguments),le=ee.slice(2,6).filter(function(it){return it}),Ne=ee.slice(6,10).filter(function(it){return it}),ns=ee[10]||"";return Ne.length?G=Ve(le)+" / "+Ve(Ne):G=Ve(le),ie+G+ns}function at(L){return parseFloat(L)===0?L:L[0]==="-"?L.slice(1):"-"+L}function Ot(L,ie,G){return ie+at(G)}function ue(L,ie,G,ee,le){return ie+G+at(ee)+le}function _(L,ie,G,ee,le){return ie+G+ee+at(le)}return{transform:function(L,ie){var G=new r(ts,h),ee=new r(bt,b),le=new r(es,y);return L=le.tokenize(ee.tokenize(G.tokenize(L.replace("`","%60")))),ie.transformDirInUrl&&(L=L.replace(Dt,"$1"+x+"$2").replace(Tt,"$1"+o+"$2").replace(At,"$1"+d).replace(It,"$1ltr").replace(Re,"rtl").replace(Xt,"ltr").replace(Jt,"rtl")),ie.transformEdgeInUrl&&(L=L.replace(kt,"$1"+d).replace(Pt,"$1left").replace(Re,"right")),L=L.replace(St,"$1"+d).replace(vt,"$1ltr").replace(Re,"rtl").replace(wt,"$1"+d).replace(Ct,"$1left").replace(Re,"right").replace(Rt,"$1$2"+d).replace(Et,"$1$2e-resize").replace(Re,"w-resize").replace(Mt,ss).replace(zt,Ot).replace(Bt,_).replace(ot,_).replace(Ut,Ot).replace(Ge,ue).replace(Kt,ue).replace(Ft,"$1$2$3$8$5$6$7$4$9").replace(Wt,"$1$2$3$8$5$6$7$4$9").replace(Lt,Ye).replace(Nt,Ye),L=G.detokenize(ee.detokenize(le.detokenize(L))),L}}}n=new a,t.exports?s.transform=function(d,x,o){var h;return typeof x=="object"?h=x:(h={},typeof x=="boolean"&&(h.transformDirInUrl=x),typeof o=="boolean"&&(h.transformEdgeInUrl=o)),n.transform(d,h)}:typeof window<"u"&&(window.cssjanus=n)})($t,$t.exports)),$t.exports}var co=lo();const uo=Vn(co);function Us(t,s,n){switch(t.type){case Dn:case Pn:case gs:return t.return=t.return||t.value;case os:t.value=Array.isArray(t.props)?t.props.join(","):t.props,Array.isArray(t.children)&&t.children.forEach(function(a){a.type===gs&&(a.children=a.value)})}var r=Tn(Array.prototype.concat(t.children),Us);return An(r)?t.return=t.value+"{"+r+"}":""}function Ks(t,s,n,r){if(t.type===vn||t.type===wn||t.type===os&&(!t.parent||t.parent.type===Cn||t.parent.type===os)){var a=uo.transform(Us(t));t.children=a?kn(a)[0].children:[],t.return=""}}Object.defineProperty(Ks,"name",{value:"stylisRTLPlugin"});Is({key:"muirtl",stylisPlugins:[Ks]});const ho=Is({key:"muiltr"}),Os=i.createContext(void 0),ws="deploy_center_theme_mode",Cs="deploy_center_theme_color",po=({children:t})=>{const[s,n]=i.useState(()=>localStorage.getItem(ws)||"light"),[r,a]=i.useState(()=>localStorage.getItem(Cs)||"blue"),d=i.useMemo(()=>io(s,r),[s,r]);i.useEffect(()=>{localStorage.setItem(ws,s)},[s]),i.useEffect(()=>{localStorage.setItem(Cs,r)},[r]);const b={Mode:s,Color:r,ToggleMode:()=>{n(y=>y==="light"?"dark":"light")},SetMode:y=>{n(y)},SetColor:y=>{a(y)},AvailableColors:Bs};return e.jsx(Os.Provider,{value:b,children:e.jsx(dn,{value:ho,children:e.jsx(In,{theme:d,children:t})})})},hs=()=>{const t=i.useContext(Os);if(!t)throw new Error("useTheme must be used within ThemeContextProvider");return t},Hs=i.createContext(void 0),ks="deploy_center_language",go=({children:t})=>{const{t:s,i18n:n}=_t(),[r,a]=i.useState(()=>localStorage.getItem(ks)||"en"),d=o=>{a(o),localStorage.setItem(ks,o),n.changeLanguage(o),setTimeout(()=>{window.location.reload()},100)};i.useEffect(()=>{const o=r==="ar"?"rtl":"ltr";document.documentElement.lang=r,document.documentElement.dir=o},[r]);const x={Language:r,ChangeLanguage:d,t:s};return e.jsx(Hs.Provider,{value:x,children:t})},Te=()=>{const t=i.useContext(Hs);if(!t)throw new Error("useLanguage must be used within LanguageProvider");return t},Y={getSettings:async()=>(await A.get("/users/me/settings")).data.Data?.Settings,updateNotificationSettings:async t=>(await A.put("/users/me/settings/notifications",t)).data.Data?.Settings,updatePreferences:async t=>(await A.put("/users/me/settings/preferences",t)).data.Data?.Settings,testNotification:async t=>{await A.post("/users/me/settings/notifications/test",{Type:t})},getProfile:async()=>(await A.get("/users/me/profile")).data.Data,updateProfile:async t=>(await A.put("/users/me/profile",t)).data.Data?.User,uploadAvatar:async t=>{throw new Error("Avatar upload is not implemented yet on the server")},changePassword:async(t,s)=>{await A.put("/users/me/password",{CurrentPassword:t,NewPassword:s})},generate2FA:async()=>(await A.post("/users/me/2fa/generate")).data.Data,enable2FA:async t=>(await A.post("/users/me/2fa/enable",{code:t})).data.Data,disable2FA:async t=>{await A.post("/users/me/2fa/disable",{code:t})},regenerateBackupCodes:async()=>(await A.post("/users/me/2fa/backup-codes/regenerate")).data.Data?.backupCodes||[],get2FAStatus:async()=>(await A.get("/users/me/2fa/status")).data.Data,listApiKeys:async()=>(await A.get("/users/me/api-keys")).data.Data?.ApiKeys||[],generateApiKey:async(t,s,n)=>(await A.post("/users/me/api-keys",{Name:t,Scopes:s,ExpiresAt:n})).data.Data,updateApiKey:async(t,s)=>{await A.put(`/users/me/api-keys/${t}`,s)},revokeApiKey:async t=>{await A.delete(`/users/me/api-keys/${t}`)},listSessions:async()=>(await A.get("/users/me/sessions")).data.Data?.Sessions||[],revokeSession:async t=>{await A.delete(`/users/me/sessions/${t}`)},revokeAllSessions:async t=>{await A.post("/users/me/sessions/revoke-all",{CurrentSessionId:t})},exportAccountData:async()=>(await A.get("/users/me/export",{responseType:"blob"})).data,deleteAccount:async()=>{await A.delete("/users/me/account")}},$s=i.createContext(void 0),xo=({children:t})=>{const{User:s,IsAuthenticated:n}=Fe(),[r,a]=i.useState(null),[d,x]=i.useState(!0),o=async()=>{if(!n||!s){a(null),x(!1);return}try{const m=await Y.getSettings();a(m)}catch(m){console.error("Failed to fetch user settings:",m),a({Timezone:"UTC",DateFormat:"YYYY-MM-DD",TimeFormat:"24h",Language:"en",Theme:"light",ColorTheme:"blue"})}finally{x(!1)}},h=async()=>{await o()},b=async m=>{try{await Y.updatePreferences(m),await o()}catch(w){throw console.error("Failed to update user settings:",w),w}};i.useEffect(()=>{o()},[n,s?.Id]);const y={Settings:r,IsLoading:d,RefreshSettings:h,UpdateSettings:b};return e.jsx($s.Provider,{value:y,children:t})},mo=()=>{const t=i.useContext($s);if(!t)throw new Error("useUserSettings must be used within UserSettingsProvider");return t},we=240,yo=[{Title:"Dashboard",TitleAr:"لوحة التحكم",Path:"/dashboard",Icon:e.jsx(ar,{})},{Title:"Projects",TitleAr:"المشاريع",Path:"/projects",Icon:e.jsx(Fs,{})},{Title:"Deployments",TitleAr:"النشر",Path:"/deployments",Icon:e.jsx(De,{})},{Title:"Queue",TitleAr:"قائمة الانتظار",Path:"/queue",Icon:e.jsx(De,{})},{Title:"Reports",TitleAr:"التقارير",Path:"/reports",Icon:e.jsx(ir,{})},{Title:"Settings",TitleAr:"الإعدادات",Path:"/settings",Icon:e.jsx(lr,{})}],fo=()=>{const t=Oe(),s=un(),n=Rn(),r=En(n.breakpoints.down("md")),{User:a,Logout:d}=Fe(),{Mode:x,ToggleMode:o}=hs(),{Language:h,ChangeLanguage:b,t:y}=Te(),[m,w]=i.useState(!1),[S,j]=i.useState(null),v=()=>{w(!m)},T=C=>{j(C.currentTarget)},g=()=>{j(null)},u=()=>{g(),d(),t("/login")},p=()=>{b(h==="en"?"ar":"en")},f=e.jsxs(l,{dir:h==="ar"?"rtl":"ltr",children:[e.jsx(xs,{children:e.jsx(c,{variant:"h6",noWrap:!0,component:"div",sx:{height:"4rem",display:"flex",alignItems:"center"},children:y("app.name")})}),e.jsx(ae,{}),e.jsx(Fn,{children:yo.map(C=>{const B=s.pathname===C.Path;return e.jsx(Wn,{disablePadding:!0,children:e.jsxs(Ln,{selected:B,onClick:()=>{t(C.Path),r&&w(!1)},sx:{textAlign:h==="ar"?"right":"left"},children:[e.jsx(et,{children:C.Icon}),e.jsx(tt,{primary:h==="ar"?C.TitleAr:C.Title})]})},C.Path)})})]}),P=h==="ar";return e.jsxs(l,{sx:{display:"flex"},children:[e.jsx(Nn,{position:"fixed",component:"nav",dir:h==="ar"?"rtl":"ltr",sx:{height:"4rem",width:{xs:"100%",md:`calc(100% - ${we}px)`},ml:{xs:0,md:P?0:`${we}px`},mr:{xs:0,md:P?`${we}px`:0}},children:e.jsxs(xs,{children:[e.jsx(Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:v,sx:{[P?"ml":"mr"]:2,display:{md:"none"}},children:e.jsx(tr,{})}),e.jsx(c,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:y("app.name")}),e.jsx(Z,{color:"inherit",onClick:o,children:x==="dark"?e.jsx(sr,{}):e.jsx(nr,{})}),e.jsx(Z,{color:"inherit",onClick:p,children:e.jsx(rr,{})}),e.jsx(Z,{color:"inherit",onClick:T,children:e.jsx(Mn,{sx:{width:32,height:32,bgcolor:"secondary.main"},children:a?.FullName?.charAt(0).toUpperCase()||"U"})}),e.jsxs(Rs,{anchorEl:S,open:!!S,onClose:g,children:[e.jsxs(O,{disabled:!0,children:[e.jsx(et,{children:e.jsx(as,{fontSize:"small"})}),e.jsx(tt,{children:a?.FullName||"User"})]}),e.jsx(ae,{}),e.jsxs(O,{onClick:u,children:[e.jsx(et,{children:e.jsx(or,{fontSize:"small"})}),e.jsx(tt,{children:y("auth.logout")})]})]})]})}),e.jsxs(l,{component:"aside",sx:{width:{md:we},flexShrink:{md:0}},children:[e.jsx(ms,{variant:"temporary",anchor:P?"right":"left",open:m,onClose:v,ModalProps:{keepMounted:!0},dir:h==="ar"?"rtl":"ltr",sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:we}},children:f}),e.jsx(ms,{variant:"permanent",anchor:P?"right":"left",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:we}},open:!0,children:f})]}),e.jsx(l,{component:"main",position:"fixed",sx:{flexGrow:1,p:1,top:"4rem",width:{md:`calc(100dvw - ${we}px)`},minHeight:"calc(100dvh - 4rem)",bgcolor:"background.default",ml:{xs:0,md:P?0:`${we}px`},mr:{xs:0,md:P?`${we}px`:0},maxHeight:"calc(100dvh - 4rem)",overflowY:"auto"},children:e.jsx(hn,{})})]})},jo=()=>{const t=Oe(),{Login:s,Verify2FA:n}=Fe(),{t:r}=Te(),[a,d]=i.useState({Username:"",Password:"",TotpCode:""}),[x,o]=i.useState(!1),[h,b]=i.useState(null),[y,m]=i.useState(!1),[w,S]=i.useState(null),[j,v]=i.useState(null),[T,g]=i.useState(!1),[u,p]=i.useState(!1),[f,P]=i.useState(null),C=k=>M=>{d(E=>({...E,[k]:M.target.value})),P(null),S(null)},B=()=>{o(!1),b(null),m(!1),S(null),v(null),d(k=>({...k,TotpCode:""}))};i.useEffect(()=>{x&&m(!0)},[x]);const H=async k=>{if(k.preventDefault(),k.stopPropagation(),P(null),v(null),!a.Username.trim()){P(r("auth.usernameRequired"));return}if(!a.Password){P(r("auth.passwordRequired"));return}if(x){m(!0);return}try{p(!0);const M=await s(a);if("TwoFactorRequired"in M&&M.TwoFactorRequired){const E=M;p(!1),P(null),v(r("auth.totpPrompt")),b(E.UserId),o(!0),setTimeout(()=>{m(!0)},0);return}t("/dashboard")}catch(M){const E=M&&typeof M=="object"&&"message"in M?String(M.message):r("auth.loginFailed"),je=E.toLowerCase();if(je.includes("two-factor")||je.includes("2fa")){o(!0),m(!0),v(r("auth.totpPrompt")),P(null),p(!1);return}P(E)}finally{p(!1)}},K=async()=>{if(S(null),P(null),!a.TotpCode){S(r("auth.totpRequired"));return}if(!h){S(r("auth.loginFailed"));return}try{p(!0),await n(h,a.TotpCode),m(!1),t("/dashboard")}catch(k){const M=k&&typeof k=="object"&&"message"in k?String(k.message):r("auth.loginFailed");S(M)}finally{p(!1)}},Q=()=>{g(k=>!k)};return e.jsxs(l,{sx:{minHeight:"100dvh",width:"100dvw",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default",p:2},children:[e.jsx(J,{sx:{maxWidth:450,width:"100%",boxShadow:3},children:e.jsxs(se,{sx:{p:4},children:[e.jsxs(l,{sx:{mb:3,textAlign:"center"},children:[e.jsx(c,{variant:"h4",component:"h1",gutterBottom:!0,children:r("app.name")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:r("auth.loginSubtitle")})]}),f&&e.jsx(q,{severity:"error",sx:{mb:3},children:f}),j&&e.jsx(q,{severity:"info",sx:{mb:3},children:j}),e.jsxs("form",{onSubmit:H,children:[e.jsx(W,{fullWidth:!0,label:r("auth.username"),value:a.Username,onChange:C("Username"),margin:"normal",autoComplete:"username",autoFocus:!0,disabled:u}),e.jsx(W,{fullWidth:!0,label:r("auth.password"),type:T?"text":"password",value:a.Password,onChange:C("Password"),margin:"normal",autoComplete:"current-password",disabled:u,InputProps:{endAdornment:e.jsx(Gt,{position:"end",children:e.jsx(Z,{onClick:Q,edge:"end",disabled:u,children:T?e.jsx(gt,{}):e.jsx(Ue,{})})})}}),e.jsx(D,{fullWidth:!0,type:"submit",variant:"contained",size:"large",disabled:u,startIcon:u?e.jsx(de,{size:20}):e.jsx(cr,{}),sx:{mt:3,mb:2},children:r(u?"auth.loggingIn":"auth.login")}),e.jsx(l,{sx:{textAlign:"center"},children:e.jsxs(c,{variant:"body2",color:"text.secondary",children:[r("auth.noAccount")," ",e.jsx(Es,{component:Ts,to:"/register",underline:"hover",children:r("auth.register")})]})})]})]})}),e.jsxs(ve,{open:y,onClose:B,fullWidth:!0,maxWidth:"xs",children:[e.jsx(Ce,{children:r("auth.totpCode")}),e.jsxs(ke,{sx:{pt:1},children:[e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r("auth.totpPrompt")}),w&&e.jsx(q,{severity:"error",sx:{mb:2},children:w}),e.jsx(W,{autoFocus:!0,fullWidth:!0,label:r("auth.totpCode"),value:a.TotpCode||"",onChange:C("TotpCode"),margin:"dense",autoComplete:"one-time-code",disabled:u})]}),e.jsxs(Pe,{sx:{px:3,pb:2},children:[e.jsx(D,{onClick:B,disabled:u,children:r("projects.cancel")}),e.jsx(D,{variant:"contained",onClick:K,disabled:u,children:r(u?"auth.loggingIn":"auth.login")})]})]})]})},bo=()=>{const t=Oe(),{Register:s}=Fe(),{t:n}=Te(),[r,a]=i.useState({Username:"",Email:"",Password:"",ConfirmPassword:""}),[d,x]=i.useState(!1),[o,h]=i.useState(!1),[b,y]=i.useState(!1),[m,w]=i.useState(null),[S,j]=i.useState(!1),v=C=>B=>{a(H=>({...H,[C]:B.target.value})),w(null)},T=C=>{let B=0;return C.length>=8&&B++,C.length>=12&&B++,/[a-z]/.test(C)&&/[A-Z]/.test(C)&&B++,/\d/.test(C)&&B++,/[^a-zA-Z0-9]/.test(C)&&B++,Math.min(B/5*100,100)},g=C=>C<40?"error":C<70?"warning":"success",u=C=>C<40?"Weak":C<70?"Medium":"Strong",p=()=>r.Username.trim()?r.Username.length<3?"Username must be at least 3 characters":r.Email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.Email)?r.Password?r.Password.length<8?"Password must be at least 8 characters":r.Password!==r.ConfirmPassword?"Passwords do not match":null:n("auth.passwordRequired"):"Invalid email format":"Email is required":n("auth.usernameRequired"),f=async C=>{C.preventDefault(),w(null);const B=p();if(B){w(B);return}try{y(!0),await s(r),j(!0),setTimeout(()=>{t("/login")},2e3)}catch(H){const K=H&&typeof H=="object"&&"message"in H?String(H.message):"Registration failed";w(K)}finally{y(!1)}},P=T(r.Password);return e.jsx(l,{sx:{minHeight:"100dvh",width:"100dvw",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default",p:2},children:e.jsx(J,{sx:{maxWidth:450,width:"100%",boxShadow:3},children:e.jsxs(se,{sx:{p:4},children:[e.jsxs(l,{sx:{mb:3,textAlign:"center"},children:[e.jsx(c,{variant:"h4",component:"h1",gutterBottom:!0,children:n("auth.createAccount")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:n("auth.registerSubtitle")})]}),m&&e.jsx(q,{severity:"error",sx:{mb:3},children:m}),S&&e.jsx(q,{severity:"success",sx:{mb:3},children:"Account created successfully! Redirecting to login..."}),e.jsxs("form",{onSubmit:f,children:[e.jsx(W,{fullWidth:!0,label:n("auth.username"),value:r.Username,onChange:v("Username"),margin:"normal",autoComplete:"username",autoFocus:!0,disabled:b||S,helperText:"Minimum 3 characters"}),e.jsx(W,{fullWidth:!0,label:"Email",type:"email",value:r.Email,onChange:v("Email"),margin:"normal",autoComplete:"email",disabled:b||S}),e.jsx(W,{fullWidth:!0,label:n("auth.password"),type:d?"text":"password",value:r.Password,onChange:v("Password"),margin:"normal",autoComplete:"new-password",disabled:b||S,InputProps:{endAdornment:e.jsx(Gt,{position:"end",children:e.jsx(Z,{onClick:()=>x(C=>!C),edge:"end",disabled:b||S,children:d?e.jsx(gt,{}):e.jsx(Ue,{})})})}}),r.Password&&e.jsxs(l,{sx:{mt:1,mb:2},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:"Password Strength"}),e.jsx(c,{variant:"caption",color:"text.secondary",children:u(P)})]}),e.jsx(zn,{variant:"determinate",value:P,color:g(P),sx:{height:6,borderRadius:3}})]}),e.jsx(W,{fullWidth:!0,label:"Confirm Password",type:o?"text":"password",value:r.ConfirmPassword,onChange:v("ConfirmPassword"),margin:"normal",autoComplete:"new-password",disabled:b||S,error:r.ConfirmPassword!==""&&r.Password!==r.ConfirmPassword,helperText:r.ConfirmPassword!==""&&r.Password!==r.ConfirmPassword?"Passwords do not match":"",InputProps:{endAdornment:e.jsx(Gt,{position:"end",children:e.jsx(Z,{onClick:()=>h(C=>!C),edge:"end",disabled:b||S,children:o?e.jsx(gt,{}):e.jsx(Ue,{})})})}}),e.jsx(D,{fullWidth:!0,type:"submit",variant:"contained",size:"large",disabled:b||S,startIcon:b?e.jsx(de,{size:20}):e.jsx(dr,{}),sx:{mt:3,mb:2},children:b?"Creating Account...":n("auth.register")}),e.jsx(l,{sx:{textAlign:"center"},children:e.jsxs(c,{variant:"body2",color:"text.secondary",children:[n("auth.haveAccount")," ",e.jsx(Es,{component:Ts,to:"/login",underline:"hover",children:n("auth.login")})]})})]})]})})})},te={getAll:async(t=!1)=>{try{return(await A.get("/projects",{params:{includeInactive:t}})).data.Data?.Projects||[]}catch(s){return console.error("Failed to fetch projects:",s),[]}},getById:async t=>A.get(`/projects/${t}`).then(s=>s.data.Data?.Project),create:async t=>A.post("/projects",t).then(s=>s.data.Data?.Project),update:async(t,s)=>A.put(`/projects/${t}`,s).then(n=>n.data.Data?.Project),delete:async t=>A.delete(`/projects/${t}`).then(s=>s.data),deploy:async(t,s)=>(await A.post(`/deployments/projects/${t}/deploy`,s||{})).data.Data?.Deployment,getBranches:async t=>{try{return(await A.get(`/projects/${t}/branches`)).data.Data?.Branches||["main","master","develop"]}catch{return["main","master","develop"]}},regenerateWebhook:async t=>(await A.post(`/projects/${t}/regenerate-webhook`)).data.Data?.WebhookSecret,getStatistics:async t=>(await A.get(`/projects/${t}/statistics`)).data.Data?.Statistics,generateSshKey:async(t,s)=>(await A.post(`/projects/${t}/ssh-key`,s||{})).data.Data,regenerateSshKey:async t=>(await A.put(`/projects/${t}/ssh-key`)).data.Data,deleteSshKey:async t=>{await A.delete(`/projects/${t}/ssh-key`)},getSshPublicKey:async t=>{try{return(await A.get(`/projects/${t}/ssh-key`)).data.Data}catch(s){if(s?.response?.status===404)return null;throw s}},toggleSshKeyUsage:async(t,s)=>{await A.patch(`/projects/${t}/ssh-key/toggle`,{enabled:s})}},fe={getAll:async()=>{try{return(await A.get("/deployments")).data.Data?.Deployments||[]}catch(t){return console.error("Failed to fetch deployments:",t),[]}},getById:async t=>(await A.get(`/deployments/${t}`)).data.Data?.Deployment,getByProject:async t=>(await A.get(`/deployments/projects/${t}/deployments`)).data.Data?.Deployments||[],getLogs:async t=>(await A.get(`/deployments/${t}/logs`)).data.Data?.Logs||"",cancel:async t=>{await A.post(`/deployments/${t}/cancel`)},retry:async t=>(await A.post(`/deployments/${t}/retry`)).data.Data?.Deployment,getStatistics:async()=>(await A.get("/deployments/statistics")).data.Data?.Statistics,getProjectStatistics:async t=>(await A.get(`/deployments/statistics?projectId=${t}`)).data.Data?.Statistics,getQueueStatus:async()=>(await A.get("/deployments/queue/status")).data.Data?.QueueStatus,getProjectQueueStatus:async t=>(await A.get(`/deployments/projects/${t}/queue/status`)).data.Data?.QueueStatus,cancelAllPending:async t=>{await A.post(`/deployments/projects/${t}/queue/cancel-all`)}},Ae=()=>{const{Settings:t,IsLoading:s}=mo(),n=t?.Timezone||"UTC",r=t?.DateFormat||"YYYY-MM-DD",a=t?.TimeFormat||"12h",d=i.useMemo(()=>{switch(r){case"DD/MM/YYYY":return"dd/MM/yyyy";case"MM/DD/YYYY":return"MM/dd/yyyy";case"DD-MM-YYYY":return"dd-MM-yyyy";case"YYYY-MM-DD":return"yyyy-MM-dd";default:return"yyyy-MM-dd"}},[r]),x=i.useMemo(()=>a==="12h"?"hh:mm:ss a":"HH:mm:ss",[a]),o=i.useMemo(()=>`${d} ${x}`,[d,x]),h=j=>{if(!j)return"-";try{const v=typeof j=="string"?Qe(j):j;return rs(v,n,d)}catch(v){return console.error("Error formatting date:",v),"-"}},b=j=>{if(!j)return"-";try{const v=typeof j=="string"?Qe(j):j;return rs(v,n,x)}catch(v){return console.error("Error formatting time:",v),"-"}},y=j=>{if(!j)return"-";try{const v=typeof j=="string"?Qe(j):j;return rs(v,n,o)}catch(v){return console.error("Error formatting datetime:",v),"-"}};return{formatDate:h,formatTime:b,formatDateTime:y,formatCustom:(j,v={})=>{if(!j)return"-";const{showDate:T=!0,showTime:g=!0}=v;return T&&g?y(j):T?h(j):g?b(j):"-"},formatRelative:j=>{if(!j)return"-";try{const v=typeof j=="string"?Qe(j):j,T=kr(v,n),u=Math.floor((new Date().getTime()-T.getTime())/1e3);if(u<60)return"just now";if(u<3600){const p=Math.floor(u/60);return`${p} minute${p>1?"s":""} ago`}else if(u<86400){const p=Math.floor(u/3600);return`${p} hour${p>1?"s":""} ago`}else if(u<604800){const p=Math.floor(u/86400);return`${p} day${p>1?"s":""} ago`}else if(u<2592e3){const p=Math.floor(u/604800);return`${p} week${p>1?"s":""} ago`}else if(u<31536e3){const p=Math.floor(u/2592e3);return`${p} month${p>1?"s":""} ago`}else{const p=Math.floor(u/31536e3);return`${p} year${p>1?"s":""} ago`}}catch(v){return console.error("Error formatting relative time:",v),"-"}},formatDuration:(j,v)=>{if(!j||!v)return"-";try{const T=typeof j=="string"?Qe(j):j,g=typeof v=="string"?Qe(v):v,u=Math.floor((g.getTime()-T.getTime())/1e3);if(u<60)return`${u}s`;if(u<3600){const p=Math.floor(u/60),f=u%60;return`${p}m ${f}s`}else if(u<86400){const p=Math.floor(u/3600),f=Math.floor(u%3600/60);return`${p}h ${f}m`}else{const p=Math.floor(u/86400),f=Math.floor(u%86400/3600);return`${p}d ${f}h`}}catch(T){return console.error("Error formatting duration:",T),"-"}},timezone:n,dateFormat:r,timeFormat:a,IsLoading:s}},So=()=>{const{t}=Te(),{User:s}=Fe(),{formatDateTime:n}=Ae(),[r,a]=i.useState(!0),[d,x]=i.useState([]),[o,h]=i.useState([]);i.useEffect(()=>{(async()=>{a(!0);try{const[m,w]=await Promise.all([te.getAll(),fe.getAll()]),S=m.length,j=w.length,v=w.filter(g=>g.Status==="success").length,T=w.filter(g=>g.Status==="failed").length;x([{Title:"totalProjects",TitleAr:"totalProjects",Value:S,Icon:e.jsx(Fs,{fontSize:"large"}),Color:"#1976d2"},{Title:"totalDeployments",TitleAr:"totalDeployments",Value:j,Icon:e.jsx(De,{fontSize:"large"}),Color:"#9c27b0"},{Title:"successfulDeployments",TitleAr:"successfulDeployments",Value:v,Icon:e.jsx(Qt,{fontSize:"large"}),Color:"#4caf50"},{Title:"failedDeployments",TitleAr:"failedDeployments",Value:T,Icon:e.jsx(jt,{fontSize:"large"}),Color:"#f44336"}]),h(w.slice(0,5))}catch(m){console.error("Failed to fetch dashboard data",m)}finally{a(!1)}})()},[]);const b=y=>{switch(y){case"success":return"success";case"failed":return"error";default:return"default"}};return r?e.jsx(l,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(de,{})}):e.jsxs(l,{children:[e.jsxs(l,{sx:{mb:4},children:[e.jsxs(c,{variant:"h4",gutterBottom:!0,children:[t("dashboard.welcome"),", ",s?.Username||"User","!"]}),e.jsx(c,{variant:"body1",color:"text.secondary",children:t("dashboard.subtitle")})]}),e.jsx(l,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:3,mb:4},children:d.map((y,m)=>e.jsx(J,{children:e.jsx(se,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(l,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:t(`dashboard.${y.Title}`)}),e.jsx(c,{variant:"h4",fontWeight:"bold",children:y.Value})]}),e.jsx(l,{sx:{color:y.Color},children:y.Icon})]})})},m))}),e.jsxs(he,{sx:{p:3},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("dashboard.recentDeployments")}),e.jsx(l,{sx:{mt:2},children:o.map(y=>e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,mb:1,bgcolor:"background.default",borderRadius:1},children:[e.jsxs(l,{children:[e.jsx(c,{variant:"body1",fontWeight:"medium",children:y.ProjectName}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[y.Branch," • ",n(y.CreatedAt)]})]}),e.jsx(pe,{label:y.Status,color:b(y.Status),size:"small"})]},y.Id))})]})]})},Xe={NodeJS:"node",React:"react",Static:"static",Docker:"docker",NextJS:"nextjs",Other:"other"},vo=({data:t,onChange:s})=>e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),e.jsx(W,{fullWidth:!0,label:"Project Name",value:t.Name,onChange:n=>s({Name:n.target.value}),required:!0,helperText:"Unique name for your project"}),e.jsx(W,{fullWidth:!0,label:"Description",value:t.Description||"",onChange:n=>s({Description:n.target.value}),multiline:!0,rows:3}),e.jsx(W,{fullWidth:!0,label:"Repository URL",value:t.RepoUrl||"",onChange:n=>s({RepoUrl:n.target.value}),required:!0,placeholder:"https://github.com/username/repo.git"}),e.jsx(W,{fullWidth:!0,label:"Branch",value:t.Branch||"",onChange:n=>s({Branch:n.target.value}),required:!0,placeholder:"master or main",helperText:"Branch to deploy from"}),e.jsx(W,{fullWidth:!0,label:"Project Path",value:t.ProjectPath||"",onChange:n=>s({ProjectPath:n.target.value}),required:!0,placeholder:"/www/wwwroot/your-project",helperText:"Absolute path where the project is located on the server"}),e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{children:"Project Type"}),e.jsxs(ye,{value:t.ProjectType,label:"Project Type",onChange:n=>s({ProjectType:n.target.value}),children:[e.jsx(O,{value:Xe.NodeJS,children:"Node.js"}),e.jsx(O,{value:Xe.React,children:"React"}),e.jsx(O,{value:Xe.NextJS,children:"Next.js"}),e.jsx(O,{value:Xe.Static,children:"Static Site"}),e.jsx(O,{value:Xe.Docker,children:"Docker"}),e.jsx(O,{value:Xe.Other,children:"Other"})]})]})]}),wo=({config:t,onChange:s})=>e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Deployment Configuration"}),e.jsx(W,{fullWidth:!0,label:"Environment",value:t.Environment||"production",onChange:n=>s({Environment:n.target.value}),helperText:"Deployment environment (e.g., production, staging)"}),e.jsx(re,{control:e.jsx(oe,{checked:t.AutoDeploy,onChange:n=>s({AutoDeploy:n.target.checked})}),label:"Auto Deploy"}),e.jsx(c,{variant:"caption",color:"text.secondary",sx:{mt:-2,ml:4},children:"Automatically deploy when code is pushed to the branch"}),e.jsxs(l,{children:[e.jsx(c,{variant:"subtitle2",gutterBottom:!0,children:"Deploy On Paths (Optional)"}),e.jsx(Bn,{multiple:!0,freeSolo:!0,options:[],value:t.DeployOnPaths||[],onChange:(n,r)=>s({DeployOnPaths:r}),renderTags:(n,r)=>n.map((a,d)=>e.jsx(pe,{variant:"outlined",label:a,...r({index:d})})),renderInput:n=>e.jsx(W,{...n,variant:"outlined",placeholder:"Add path pattern (e.g., src/**)",helperText:"Only deploy if changes match these patterns (glob format)"})})]})]}),Co=({pipeline:t,onChange:s})=>{const n=()=>{s([...t,{Name:"",Run:[""],RunIf:""}])},r=x=>{const o=[...t];o.splice(x,1),s(o)},a=(x,o,h)=>{const b=[...t];b[x]={...b[x],[o]:h},s(b)},d=(x,o)=>{if(o==="up"&&x===0||o==="down"&&x===t.length-1)return;const h=[...t],b=o==="up"?x-1:x+1;[h[x],h[b]]=[h[b],h[x]],s(h)};return e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(c,{variant:"h6",children:"Pipeline Steps"}),e.jsx(D,{startIcon:e.jsx(is,{}),variant:"outlined",onClick:n,children:"Add Step"})]}),t.length===0&&e.jsx(c,{color:"text.secondary",align:"center",sx:{py:4},children:"No pipeline steps defined. Add a step to define your deployment process."}),t.map((x,o)=>e.jsx(J,{variant:"outlined",children:e.jsx(se,{children:e.jsxs(N,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(N,{size:{xs:12,sm:6},children:e.jsx(W,{fullWidth:!0,label:"Step Name",value:x.Name,onChange:h=>a(o,"Name",h.target.value),size:"small"})}),e.jsxs(N,{size:{xs:12,sm:6},sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[e.jsx(Z,{size:"small",onClick:()=>d(o,"up"),disabled:o===0,children:e.jsx(ur,{})}),e.jsx(Z,{size:"small",onClick:()=>d(o,"down"),disabled:o===t.length-1,children:e.jsx(hr,{})}),e.jsx(Z,{size:"small",color:"error",onClick:()=>r(o),children:e.jsx(Ke,{})})]}),e.jsx(N,{size:{xs:12},children:e.jsx(W,{fullWidth:!0,label:"Command(s)",value:x.Run.join(`
`),onChange:h=>a(o,"Run",h.target.value.split(`
`)),multiline:!0,rows:2,size:"small",helperText:"Enter one command per line"})}),e.jsx(N,{size:{xs:12},children:e.jsx(W,{fullWidth:!0,label:"Run Condition (Optional)",value:x.RunIf||"",onChange:h=>a(o,"RunIf",h.target.value),size:"small",placeholder:"e.g., {{Environment}} === 'production'"})})]})})},o))]})},ko=({notifications:t,onChange:s})=>{const[n,r]=pn.useState({discord:!1,slack:!1,telegram:!1,email:!1}),a=(o,h)=>{const b=t[o]||{};s({...t,[o]:{...b,...h}})},d=(o,h)=>{h.stopPropagation();const y=t[o]?.Enabled||!1;a(o,{Enabled:!y});const m=o.toLowerCase();y||r(w=>({...w,[m]:!0}))},x=o=>{r(h=>({...h,[o]:!h[o]}))};return e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(c,{variant:"h6",children:"Notifications"}),e.jsxs(l,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(re,{control:e.jsx(oe,{checked:t.OnSuccess,onChange:o=>s({...t,OnSuccess:o.target.checked})}),label:"On Success"}),e.jsx(re,{control:e.jsx(oe,{checked:t.OnFailure,onChange:o=>s({...t,OnFailure:o.target.checked})}),label:"On Failure"}),e.jsx(re,{control:e.jsx(oe,{checked:t.OnStart,onChange:o=>s({...t,OnStart:o.target.checked})}),label:"On Start"})]}),e.jsxs(ct,{expanded:n.discord,onChange:()=>x("discord"),children:[e.jsx(dt,{expandIcon:e.jsx(ht,{}),children:e.jsx(re,{control:e.jsx(oe,{checked:t.Discord?.Enabled||!1,onChange:o=>d("Discord",o)}),label:"Discord",onClick:o=>o.stopPropagation()})}),e.jsx(ut,{children:e.jsx(W,{fullWidth:!0,label:"Webhook URL",value:t.Discord?.WebhookUrl||"",onChange:o=>a("Discord",{WebhookUrl:o.target.value}),placeholder:"https://discord.com/api/webhooks/..."})})]}),e.jsxs(ct,{expanded:n.slack,onChange:()=>x("slack"),children:[e.jsx(dt,{expandIcon:e.jsx(ht,{}),children:e.jsx(re,{control:e.jsx(oe,{checked:t.Slack?.Enabled||!1,onChange:o=>d("Slack",o)}),label:"Slack",onClick:o=>o.stopPropagation()})}),e.jsx(ut,{children:e.jsx(W,{fullWidth:!0,label:"Webhook URL",value:t.Slack?.WebhookUrl||"",onChange:o=>a("Slack",{WebhookUrl:o.target.value}),placeholder:"https://hooks.slack.com/services/..."})})]}),e.jsxs(ct,{expanded:n.telegram,onChange:()=>x("telegram"),children:[e.jsx(dt,{expandIcon:e.jsx(ht,{}),children:e.jsx(re,{control:e.jsx(oe,{checked:t.Telegram?.Enabled||!1,onChange:o=>d("Telegram",o)}),label:"Telegram",onClick:o=>o.stopPropagation()})}),e.jsx(ut,{children:e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{size:{xs:12,md:6},children:e.jsx(W,{fullWidth:!0,label:"Bot Token",value:t.Telegram?.BotToken||"",onChange:o=>a("Telegram",{BotToken:o.target.value}),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"})}),e.jsx(N,{size:{xs:12,md:6},children:e.jsx(W,{fullWidth:!0,label:"Chat ID",value:t.Telegram?.ChatId||"",onChange:o=>a("Telegram",{ChatId:o.target.value}),placeholder:"-1001234567890"})})]})})]}),e.jsxs(ct,{expanded:n.email,onChange:()=>x("email"),children:[e.jsx(dt,{expandIcon:e.jsx(ht,{}),children:e.jsx(re,{control:e.jsx(oe,{checked:t.Email?.Enabled||!1,onChange:o=>d("Email",o)}),label:"Email",onClick:o=>o.stopPropagation()})}),e.jsx(ut,{children:e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{size:{xs:12,md:6},children:e.jsx(W,{fullWidth:!0,label:"SMTP Host",value:t.Email?.Host||"",onChange:o=>a("Email",{Host:o.target.value})})}),e.jsx(N,{size:{xs:12,md:3},children:e.jsx(W,{fullWidth:!0,label:"Port",type:"number",value:t.Email?.Port||587,onChange:o=>a("Email",{Port:parseInt(o.target.value)})})}),e.jsx(N,{size:{xs:12,md:3},sx:{display:"flex",alignItems:"center"},children:e.jsx(re,{control:e.jsx(oe,{checked:t.Email?.Secure||!1,onChange:o=>a("Email",{Secure:o.target.checked})}),label:"Secure (SSL/TLS)"})}),e.jsx(N,{size:{xs:12,md:6},children:e.jsx(W,{fullWidth:!0,label:"User",value:t.Email?.User||"",onChange:o=>a("Email",{User:o.target.value})})}),e.jsx(N,{size:{xs:12,md:6},children:e.jsx(W,{fullWidth:!0,label:"Password",type:"password",value:t.Email?.Password||"",onChange:o=>a("Email",{Password:o.target.value})})}),e.jsx(N,{size:{xs:12,md:6},children:e.jsx(W,{fullWidth:!0,label:"From Address",value:t.Email?.From||"",onChange:o=>a("Email",{From:o.target.value})})}),e.jsx(N,{size:{xs:12,md:6},children:e.jsx(W,{fullWidth:!0,label:"To (comma separated)",value:t.Email?.To?.join(", ")||"",onChange:o=>a("Email",{To:o.target.value.split(",").map(h=>h.trim())})})})]})})]})]})},Ps=["Basic Info","Configuration","Pipeline","Notifications"],Po=({initialData:t,onClose:s,onSubmit:n})=>{const[r,a]=i.useState(0),[d,x]=i.useState(!1),[o,h]=i.useState(null),[b,y]=i.useState({Name:"",Description:"",RepoUrl:"",Branch:"master",ProjectPath:"",ProjectType:"node",Config:{Branch:"master",AutoDeploy:!0,Environment:"production",DeployOnPaths:[],Pipeline:[],Notifications:{OnSuccess:!0,OnFailure:!0,OnStart:!1},Variables:{}},...t}),m=()=>{a(g=>g+1)},w=()=>{a(g=>g-1)},S=async()=>{x(!0),h(null);try{const g={...b,Config:{...b.Config,Branch:b.Branch||"master"}};await n(g),s()}catch(g){h(g.message||"Failed to save project")}finally{x(!1)}},j=g=>{y(u=>({...u,...g}))},v=g=>{y(u=>({...u,Config:{...u.Config,...g}}))},T=g=>{switch(g){case 0:return e.jsx(vo,{data:b,onChange:j});case 1:return e.jsx(wo,{config:b.Config,onChange:v});case 2:return e.jsx(Co,{pipeline:b.Config.Pipeline||[],onChange:u=>v({Pipeline:u})});case 3:return e.jsx(ko,{notifications:b.Config?.Notifications||{OnSuccess:!0,OnFailure:!0,OnStart:!1},onChange:u=>v({Notifications:u})});default:return"Unknown step"}};return e.jsx(Un,{maxWidth:"md",sx:{py:4},children:e.jsxs(he,{sx:{p:4},children:[e.jsx(c,{variant:"h4",gutterBottom:!0,children:t?"Edit Project":"Create New Project"}),e.jsx(Kn,{activeStep:r,sx:{mb:4},children:Ps.map(g=>e.jsx(On,{children:e.jsx(Hn,{children:g})},g))}),o&&e.jsx(q,{severity:"error",sx:{mb:3},children:o}),e.jsx(l,{sx:{minHeight:400},children:T(r)}),e.jsxs(l,{sx:{display:"flex",justifyContent:"flex-end",mt:4,gap:2},children:[e.jsx(D,{disabled:r===0||d,onClick:w,children:"Back"}),r===Ps.length-1?e.jsx(D,{variant:"contained",onClick:S,disabled:d,children:d?"Saving...":"Finish"}):e.jsx(D,{variant:"contained",onClick:m,disabled:d,children:"Next"})]})]})})},qs=({Open:t,Project:s,OnClose:n,OnDeploy:r})=>{const[a,d]=i.useState(""),[x,o]=i.useState(""),[h,b]=i.useState(""),[y,m]=i.useState(!1),[w,S]=i.useState(null),[j,v]=i.useState(!1),T=["main","master","develop","staging","production"];i.useEffect(()=>{s&&(d(s.Branch||"main"),o(""),b(""),S(null),v(!1))},[s]);const g=async()=>{if(s){m(!0),S(null);try{const p={ProjectId:s.Id,Branch:a||void 0,CommitHash:x||void 0,CommitMessage:h||void 0};await r(p),n()}catch(p){const f=p&&typeof p=="object"&&"message"in p?String(p.message):"Failed to start deployment";S(f)}finally{m(!1)}}},u=()=>{y||n()};return e.jsxs(ve,{open:t,onClose:u,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[e.jsxs(Ce,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(De,{color:"primary"}),e.jsxs(c,{variant:"h6",children:["Deploy: ",s?.Name||"Project"]})]}),e.jsxs(ke,{children:[w&&e.jsx(q,{severity:"error",sx:{mb:2},children:w}),e.jsxs(l,{sx:{mt:1},children:[e.jsxs(xe,{fullWidth:!0,sx:{mb:2},children:[e.jsx(me,{children:"Branch"}),e.jsx(ye,{value:a,onChange:p=>d(p.target.value),label:"Branch",disabled:y,children:T.map(p=>e.jsx(O,{value:p,children:p},p))})]}),e.jsxs(ct,{expanded:j,onChange:()=>v(!j),sx:{mb:2},children:[e.jsx(dt,{expandIcon:e.jsx(ht,{}),children:e.jsx(c,{variant:"body2",color:"text.secondary",children:"Advanced Options (Optional)"})}),e.jsx(ut,{children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(W,{label:"Commit Hash",value:x,onChange:p=>o(p.target.value),placeholder:"e.g., a1b2c3d4",helperText:"Deploy specific commit (leave empty for latest)",disabled:y,fullWidth:!0}),e.jsx(W,{label:"Commit Message",value:h,onChange:p=>b(p.target.value),placeholder:"Manual deployment",helperText:"Custom message for this deployment",disabled:y,fullWidth:!0,multiline:!0,rows:2})]})})]}),e.jsxs(q,{severity:"info",variant:"outlined",children:["This will trigger a new deployment for ",e.jsx("strong",{children:s?.Name})," from the"," ",e.jsx("strong",{children:a})," branch."]})]})]}),e.jsxs(Pe,{sx:{px:3,pb:2},children:[e.jsx(D,{onClick:u,disabled:y,color:"inherit",children:"Cancel"}),e.jsx(D,{onClick:g,variant:"contained",disabled:y||!a,startIcon:y?e.jsx(de,{size:20}):e.jsx(De,{}),children:y?"Deploying...":"Deploy Now"})]})]})},Do=()=>{const t=Oe(),{t:s}=Te(),[n,r]=i.useState([]),[a,d]=i.useState(!0),[x,o]=i.useState(!1),[h,b]=i.useState(null),[y,m]=i.useState(null),[w,S]=i.useState(null),[j,v]=i.useState(null),[T,g]=i.useState(null),[u,p]=i.useState(!1),[f,P]=i.useState(!1),[C,B]=i.useState(null),H=async()=>{d(!0);try{const F=await te.getAll(!0);r(F)}catch(F){console.error("Failed to fetch projects",F),m("Failed to load projects")}finally{d(!1)}};i.useEffect(()=>{H()},[]);const K=F=>{b(F||null),o(!0),m(null),S(null)},Q=async F=>{try{h?(await te.update(h.Id,F),S("Project updated successfully")):(await te.create(F),S("Project created successfully")),setTimeout(()=>{H()},1e3)}catch(V){throw new Error(V?.message||"Failed to save project")}},k=(F,V)=>{v(F.currentTarget),g(V)},M=()=>{v(null),g(null)},E=()=>{T&&K(T),M()},je=()=>{p(!0),M()},be=async()=>{if(T)try{await te.delete(T.Id),S("Project deleted successfully"),H()}catch(F){m(F?.message||"Failed to delete project")}finally{p(!1),g(null)}},We=F=>{B(F),P(!0)},z=async F=>{try{await te.deploy(F.ProjectId,F),S("Deployment started successfully"),setTimeout(()=>S(null),3e3),P(!1)}catch(V){const Ie=V&&typeof V=="object"&&"message"in V?String(V.message):"Failed to trigger deployment";throw new Error(Ie)}},ne=async()=>{if(T)try{await te.update(T.Id,{IsActive:!T.IsActive}),S(`Project ${T.IsActive?"deactivated":"activated"} successfully`),H()}catch(F){m(F?.message||"Failed to update project")}finally{M()}};return e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsxs(l,{children:[e.jsx(c,{variant:"h4",gutterBottom:!0,children:s("projects.title")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:s("projects.baseInfo")})]}),e.jsxs(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(D,{startIcon:e.jsx(He,{}),onClick:H,disabled:a,sx:{height:"2.5rem"},children:s("common.refresh")}),e.jsx(D,{variant:"contained",startIcon:e.jsx(is,{}),onClick:()=>K(),sx:{height:"2.5rem"},children:s("projects.createProject")})]})]}),y&&e.jsx(q,{severity:"error",sx:{mb:3},onClose:()=>m(null),children:y}),w&&e.jsx(q,{severity:"success",sx:{mb:3},onClose:()=>S(null),children:w}),a?e.jsx(l,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(de,{})}):e.jsx(e.Fragment,{children:n.length===0?e.jsx(J,{sx:{textAlign:"center",py:8},children:e.jsxs(se,{children:[e.jsx(ls,{sx:{fontSize:64,color:"text.disabled",mb:2}}),e.jsx(c,{variant:"h6",gutterBottom:!0,children:s("projects.noProjects")}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create your first project to get started"}),e.jsx(D,{variant:"contained",startIcon:e.jsx(is,{}),onClick:()=>K(),children:s("projects.createProject")})]})}):e.jsx(N,{container:!0,spacing:3,children:n.map(F=>e.jsx(N,{size:{xs:12,sm:6,md:4},children:e.jsxs(J,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:6}},children:[e.jsxs(se,{sx:{flexGrow:1},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:2},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600},children:F.Name}),e.jsx(pe,{label:F.IsActive?s("common.active"):s("common.inactive"),color:F.IsActive?"success":"default",size:"small"})]}),e.jsxs(l,{sx:{mb:2},children:[e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.jsx(ls,{sx:{fontSize:16,mr:.5}}),F.RepoUrl]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:["Branch: ",e.jsx("strong",{children:F.Branch})," • Type:"," ",e.jsx("strong",{children:F.ProjectType})]})]})]}),e.jsxs($n,{sx:{justifyContent:"space-between",px:2,pb:2},children:[e.jsxs(l,{children:[e.jsx(D,{size:"small",startIcon:e.jsx(Ue,{}),onClick:()=>t(`/projects/${F.Id}`),children:s("projects.viewDetails")}),e.jsx(D,{size:"small",startIcon:e.jsx(De,{}),onClick:()=>We(F),color:"primary",children:s("projects.deploy")})]}),e.jsx(Z,{size:"small",onClick:V=>k(V,F),children:e.jsx(pr,{})})]})]})},F.Id))})}),e.jsxs(Rs,{anchorEl:j,open:!!j,onClose:M,children:[e.jsxs(O,{onClick:E,children:[e.jsx(et,{children:e.jsx(gr,{fontSize:"small"})}),e.jsx(tt,{children:s("common.edit")})]}),e.jsxs(O,{onClick:ne,children:[e.jsx(et,{children:e.jsx(xr,{fontSize:"small",color:T?.IsActive?"error":"success"})}),e.jsx(tt,{children:T?.IsActive?s("common.deactivate"):s("common.activate")})]}),e.jsxs(O,{onClick:je,children:[e.jsx(et,{children:e.jsx(Ke,{fontSize:"small",color:"error"})}),e.jsx(tt,{sx:{color:"error.main"},children:s("common.delete")})]})]}),e.jsx(ve,{open:x,onClose:()=>o(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh"}},children:x&&e.jsx(Po,{initialData:h||void 0,onClose:()=>o(!1),onSubmit:Q})}),e.jsx(qs,{Open:f,Project:C,OnClose:()=>{P(!1),B(null)},OnDeploy:z}),e.jsxs(ve,{open:u,onClose:()=>p(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(Ce,{children:s("projects.confirmDelete")}),e.jsx(ke,{children:e.jsx(c,{children:s("projects.confirmDeleteDesc")})}),e.jsxs(Pe,{children:[e.jsx(D,{onClick:()=>p(!1),children:s("common.cancel")}),e.jsx(D,{variant:"contained",color:"error",onClick:be,startIcon:e.jsx(Ke,{}),children:s("common.delete")})]})]})]})},To=({project:t,onUpdate:s})=>{const{t:n}=Te(),{formatDateTime:r}=Ae(),[a,d]=i.useState(!1),[x,o]=i.useState(""),[h,b]=i.useState(""),[y,m]=i.useState(!1),[w,S]=i.useState(null),[j,v]=i.useState({open:!1,action:null}),T=t.UseSshKey&&t.SshPublicKey;i.useEffect(()=>{T&&g()},[T,t.Id]);const g=async()=>{try{const C=await te.getSshPublicKey(t.Id);S(C)}catch(C){console.error("Failed to load SSH key info",C)}},u=async()=>{d(!0),o(""),b("");try{const C=await te.generateSshKey(t.Id,{keyType:"ed25519"});b(n("projects.sshKeyGenerated")||"SSH key generated successfully! Copy the public key and add it to your GitHub repository."),S({PublicKey:C.PublicKey,Fingerprint:C.Fingerprint,KeyType:C.KeyType,CreatedAt:new Date,RotatedAt:null}),m(!0),s()}catch(C){o(C?.message||"Failed to generate SSH key")}finally{d(!1),v({open:!1,action:null})}},p=async()=>{d(!0),o(""),b("");try{const C=await te.regenerateSshKey(t.Id);b(n("projects.sshKeyRegenerated")||"SSH key regenerated successfully! Update the public key in your GitHub repository."),S({PublicKey:C.PublicKey,Fingerprint:C.Fingerprint,KeyType:C.KeyType,CreatedAt:w?.CreatedAt||new Date,RotatedAt:new Date}),m(!0),s()}catch(C){o(C?.message||"Failed to regenerate SSH key")}finally{d(!1),v({open:!1,action:null})}},f=async()=>{d(!0),o(""),b("");try{await te.deleteSshKey(t.Id),b(n("projects.sshKeyDeleted")||"SSH key deleted successfully!"),S(null),s()}catch(C){o(C?.message||"Failed to delete SSH key")}finally{d(!1),v({open:!1,action:null})}},P=()=>{w?.PublicKey&&(navigator.clipboard.writeText(w.PublicKey),b(n("projects.publicKeyCopied")||"Public key copied to clipboard!"),setTimeout(()=>b(""),3e3))};return e.jsx(J,{sx:{mt:1},children:e.jsxs(se,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(js,{sx:{mr:1,color:"primary.main"}}),e.jsx(c,{variant:"h6",children:n("projects.sshKeyManagement")||"SSH Key Management"})]}),T&&e.jsx(pe,{label:n("common.active")||"Active",color:"success",size:"small"})]}),x&&e.jsx(q,{severity:"error",sx:{mb:1},onClose:()=>o(""),children:x}),h&&e.jsx(q,{severity:"success",sx:{mb:1},onClose:()=>b(""),children:h}),T?e.jsxs(l,{children:[w&&e.jsx(l,{sx:{mb:1},children:e.jsxs(Yt,{spacing:1,children:[e.jsx(l,{sx:{display:"flex",justifyContent:"space-between"},children:e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsxs("strong",{children:[n("projects.keyType")||"Key Type",":"]})," ",w.KeyType?.toUpperCase()]})}),e.jsxs(l,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:e.jsxs("strong",{children:[n("projects.fingerprint")||"Fingerprint",":"]})}),e.jsx(c,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.75rem",wordBreak:"break-all"},children:w.Fingerprint})]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsxs("strong",{children:[n("projects.created")||"Created",":"]})," ",r(w.CreatedAt)]}),w.RotatedAt&&e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsxs("strong",{children:[n("projects.lastRotated")||"Last Rotated",":"]})," ",r(w.RotatedAt)]})]})}),e.jsx(ae,{sx:{my:2}}),e.jsxs(l,{sx:{mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsxs(c,{variant:"subtitle2",children:[n("projects.publicKey")||"Public Key",":"]}),e.jsxs(l,{children:[e.jsx(st,{title:n(y?"common.hide":"common.show"),children:e.jsx(Z,{size:"small",onClick:()=>m(!y),children:y?e.jsx(gt,{fontSize:"small"}):e.jsx(Ue,{fontSize:"small"})})}),e.jsx(st,{title:n("common.copy")||"Copy to clipboard",children:e.jsx(Z,{size:"small",onClick:P,children:e.jsx(us,{fontSize:"small"})})})]})]}),y&&w?.PublicKey&&e.jsx(W,{fullWidth:!0,multiline:!0,rows:3,value:w.PublicKey,InputProps:{readOnly:!0,sx:{fontFamily:"monospace",fontSize:"0.75rem"}}})]}),e.jsxs(l,{sx:{display:"flex",gap:1},children:[e.jsx(D,{variant:"outlined",startIcon:e.jsx(He,{}),onClick:()=>v({open:!0,action:"regenerate"}),disabled:a,children:n("projects.regenerateKey")||"Regenerate Key"}),e.jsx(D,{variant:"outlined",color:"error",startIcon:e.jsx(Ke,{}),onClick:()=>v({open:!0,action:"delete"}),disabled:a,children:n("common.delete")||"Delete"})]})]}):e.jsxs(l,{children:[e.jsx(q,{severity:"info",sx:{mb:1},children:e.jsx(c,{variant:"body2",children:n("projects.noSshKeyConfigured")||"No SSH key configured for this project. Generate an ED25519 SSH key to enable secure access to private GitHub repositories."})}),e.jsx(q,{sx:{p:2,mb:1},severity:"warning",children:e.jsx(Yt,{spacing:1,children:e.jsx(l,{sx:{display:"flex",alignItems:"start"},children:e.jsx(c,{variant:"body2",children:n("projects.sshKeyInstructions")||"After generating the SSH key, copy the public key and add it to your GitHub repository: Settings → Deploy Keys → Add deploy key (read-only access)."})})})}),e.jsx(D,{variant:"contained",startIcon:e.jsx(js,{}),onClick:()=>v({open:!0,action:"generate"}),disabled:a,children:n("projects.generateSshKey")||"Generate SSH Key"})]}),e.jsxs(ve,{open:j.open,onClose:()=>v({open:!1,action:null}),maxWidth:"sm",fullWidth:!0,children:[e.jsxs(Ce,{children:[j.action==="generate"&&(n("projects.confirmGenerateSshKey")||"Generate SSH Key?"),j.action==="regenerate"&&(n("projects.confirmRegenerateSshKey")||"Regenerate SSH Key?"),j.action==="delete"&&(n("projects.confirmDeleteSshKey")||"Delete SSH Key?")]}),e.jsxs(ke,{children:[j.action==="generate"&&e.jsx(c,{children:n("projects.generateSshKeyDescription")||"This will generate a new ED25519 SSH key pair for this project. You will need to add the public key to your GitHub repository as a deploy key."}),j.action==="regenerate"&&e.jsx(q,{severity:"warning",sx:{mb:2},children:n("projects.regenerateSshKeyWarning")||"This will generate a new SSH key and invalidate the old one. You must update the deploy key in your GitHub repository. This action cannot be undone."}),j.action==="delete"&&e.jsx(q,{severity:"error",children:n("projects.deleteSshKeyWarning")||"This will delete the SSH key from this project. Deployments will fall back to HTTPS. This action cannot be undone."})]}),e.jsxs(Pe,{children:[e.jsx(D,{onClick:()=>v({open:!1,action:null}),children:n("common.cancel")||"Cancel"}),e.jsx(D,{onClick:j.action==="generate"?u:j.action==="regenerate"?p:f,color:j.action==="delete"?"error":"primary",variant:"contained",disabled:a,children:a?n("common.processing")||"Processing...":n("common.confirm")||"Confirm"})]})]})]})})},Ao=()=>{const{id:t}=As(),s=Oe(),{t:n}=_t(),{formatDateTime:r}=Ae(),[a,d]=i.useState(null),[x,o]=i.useState([]),[h,b]=i.useState(null),[y,m]=i.useState(!0),[w,S]=i.useState(null),[j,v]=i.useState(null),[T,g]=i.useState(!1),[u,p]=i.useState(!1),[f,P]=i.useState(!1),[C,B]=i.useState(!1),[H,K]=i.useState(!1),Q=async()=>{if(t){m(!0);try{const[z,ne,F]=await Promise.all([te.getById(Number(t)),fe.getAll(),te.getStatistics(Number(t)).catch(()=>null)]);d(z),o(ne.filter(V=>V.ProjectId===Number(t)||V.ProjectName===z.Name)),b(F)}catch(z){S(z?.message||n("projects.failedToLoadDetails"))}finally{m(!1)}}};i.useEffect(()=>{Q()},[t]);const k=()=>{K(!0)},M=async z=>{if(a)try{p(!0),await te.deploy(z.ProjectId,z),v(n("deployments.startedSuccessfully")),K(!1),setTimeout(()=>{Q(),v(null)},3e3)}catch(ne){const F=ne&&typeof ne=="object"&&"message"in ne?String(ne.message):n("deployments.failedToStart");throw new Error(F)}finally{p(!1)}},E=async()=>{if(a)try{await te.delete(a.Id),s("/projects")}catch(z){S(z?.message||n("projects.failedToDelete")),g(!1)}},je=async()=>{if(a&&window.confirm(n("projects.webhookRegenerationWarning")))try{B(!0);const z=await te.regenerateWebhook(a.Id);d({...a,WebhookSecret:z}),v(n("projects.webhookRegenerated")),setTimeout(()=>v(null),3e3)}catch(z){S(z?.message||n("projects.failedToRegenerateWebhook"))}finally{B(!1)}},be=z=>{navigator.clipboard.writeText(z),v(n("common.copiedToClipboard")),setTimeout(()=>v(null),2e3)},We=z=>{const ne={success:{color:"success",icon:e.jsx(Qt,{fontSize:"small"})},failed:{color:"error",icon:e.jsx(jt,{fontSize:"small"})},inProgress:{color:"warning",icon:e.jsx(Se,{fontSize:"small"})},pending:{color:"default",icon:e.jsx(Se,{fontSize:"small"})}},F=ne[z]||ne.pending;return e.jsx(pe,{label:z,color:F.color,size:"small",icon:F.icon||void 0})};return y?e.jsx(l,{sx:{display:"flex",justifyContent:"center",mt:8},children:e.jsx(de,{})}):w&&!a?e.jsxs(l,{children:[e.jsx(q,{severity:"error",sx:{mb:3},children:w}),e.jsx(D,{startIcon:e.jsx(pt,{}),onClick:()=>s("/projects"),children:n("common.backToProjects")})]}):a?e.jsxs(l,{children:[e.jsxs(l,{sx:{mb:2},children:[e.jsx(D,{startIcon:e.jsx(pt,{}),onClick:()=>s("/projects"),sx:{mb:.5},children:n("common.backToProjects")}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs(l,{children:[e.jsx(c,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:a.Name}),e.jsxs(l,{sx:{display:"flex",gap:1},children:[e.jsx(pe,{label:a.IsActive?n("common.active"):n("common.inactive"),color:a.IsActive?"success":"default"}),e.jsx(pe,{label:a.ProjectType,variant:"outlined"})]})]}),e.jsxs(l,{sx:{display:"flex",gap:1},children:[e.jsx(Z,{onClick:Q,children:e.jsx(He,{})}),e.jsx(D,{variant:"outlined",color:"error",startIcon:e.jsx(Ke,{}),onClick:()=>g(!0),children:n("common.delete")}),e.jsx(D,{variant:"contained",startIcon:e.jsx(De,{}),onClick:k,disabled:u,children:n("projects.deployNow")})]})]})]}),w&&e.jsx(q,{severity:"error",sx:{mb:2},onClose:()=>S(null),children:w}),j&&e.jsx(q,{severity:"success",sx:{mb:2},onClose:()=>v(null),children:j}),e.jsxs(N,{container:!0,spacing:1,children:[e.jsxs(N,{size:{xs:12,md:6},children:[e.jsx(J,{sx:{mb:1},children:e.jsxs(se,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:n("projects.projectInfo")}),e.jsx(ae,{sx:{mb:.5}}),e.jsxs(l,{sx:{mb:.5},children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:n("projects.repoUrl")}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",mt:.5},children:[e.jsx(ls,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),e.jsx(c,{variant:"body2",children:a.RepoUrl})]})]}),e.jsxs(l,{sx:{mb:.5},children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:n("projects.branch")}),e.jsx(c,{variant:"body1",sx:{fontWeight:500,mt:.5},children:a.Branch})]}),e.jsxs(l,{sx:{mb:.5},children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:n("projects.projectType")}),e.jsx(c,{variant:"body1",sx:{fontWeight:500,mt:.5},children:a.ProjectType})]})]})}),e.jsx(J,{children:e.jsxs(se,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:n("projects.webhook")}),e.jsx(ae,{sx:{mb:.5}}),e.jsx(c,{variant:"body2",color:"text.secondary",paragraph:!0,children:n("projects.webhook")}),e.jsx(W,{fullWidth:!0,label:n("projects.webhookSecret"),type:f?"text":"password",value:a.WebhookSecret||"Not generated",InputProps:{readOnly:!0,endAdornment:e.jsxs(Gt,{position:"end",children:[e.jsx(Z,{onClick:()=>P(!f),edge:"end",children:f?e.jsx(gt,{}):e.jsx(Ue,{})}),e.jsx(st,{title:n("common.copy"),children:e.jsx(Z,{onClick:()=>be(a.WebhookSecret),edge:"end",children:e.jsx(us,{})})})]})},sx:{mb:.5}}),e.jsx(D,{variant:"outlined",color:"warning",startIcon:C?e.jsx(de,{size:20}):e.jsx(mr,{}),onClick:je,disabled:C,fullWidth:!0,children:n("projects.regenerateSecret")})]})}),e.jsx(To,{project:a,onUpdate:Q})]}),e.jsxs(N,{size:{xs:12,md:6},children:[h&&e.jsx(J,{sx:{mb:1},children:e.jsxs(se,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:n("projects.statistics")}),e.jsx(ae,{sx:{mb:.5}}),e.jsxs(N,{container:!0,spacing:2,sx:{mb:1},children:[e.jsx(N,{size:{xs:4},children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(c,{variant:"h4",color:"primary.main",children:h.TotalDeployments}),e.jsx(c,{variant:"caption",color:"text.secondary",children:n("common.total")})]})}),e.jsx(N,{size:{xs:4},children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsxs(c,{variant:"h4",color:"success.main",children:[h.SuccessRate,"%"]}),e.jsx(c,{variant:"caption",color:"text.secondary",children:n("projects.successRate")})]})}),e.jsx(N,{size:{xs:4},children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsxs(c,{variant:"h4",color:"info.main",children:[Math.round(h.AverageDuration),"s"]}),e.jsx(c,{variant:"caption",color:"text.secondary",children:n("projects.avgDuration")})]})})]}),h?.DeploymentsByDay?.length>0&&e.jsx(l,{sx:{width:"100%",height:100,minHeight:100},children:e.jsx(_n,{aspect:3,width:400,height:400,children:e.jsxs(Qn,{data:h.DeploymentsByDay,children:[e.jsx(Zn,{strokeDasharray:"3 3"}),e.jsx(Xn,{dataKey:"Date",fontSize:9}),e.jsx(Jn,{fontSize:9}),e.jsx(er,{}),e.jsx(fs,{dataKey:"Success",stackId:"a",fill:"#4caf50"}),e.jsx(fs,{dataKey:"Failed",stackId:"a",fill:"#f44336"})]})})})]})}),e.jsx(J,{children:e.jsxs(se,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:n("dashboard.recentDeployments")}),e.jsx(ae,{sx:{mb:.5}}),x.length===0?e.jsxs(l,{sx:{textAlign:"center",py:4},children:[e.jsx(De,{sx:{fontSize:48,color:"text.disabled",mb:.5}}),e.jsx(c,{variant:"body2",color:"text.secondary",children:n("deployments.noDeployments")})]}):e.jsx(xt,{component:he,variant:"outlined",sx:{maxHeight:240},children:e.jsxs(mt,{size:"small",children:[e.jsx(yt,{sx:{position:"sticky",top:0,zIndex:1,backgroundColor:"background.paper"},children:e.jsxs(ge,{children:[e.jsx(I,{children:n("deployments.status")}),e.jsx(I,{children:n("deployments.branch")}),e.jsx(I,{children:n("common.date")}),e.jsx(I,{children:n("common.actions")})]})}),e.jsx(ft,{children:x.slice(0,5).map(z=>e.jsxs(ge,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(I,{children:We(z.Status)}),e.jsx(I,{children:z.Branch}),e.jsx(I,{children:e.jsx(c,{variant:"caption",children:r(z.CreatedAt)})}),e.jsx(I,{children:e.jsx(D,{size:"small",onClick:()=>s(`/deployments/${z.Id}`),children:n("deployments.viewLogs")})})]},z.Id))})]})})]})})]})]}),e.jsx(qs,{Open:H,Project:a,OnClose:()=>K(!1),OnDeploy:M}),e.jsxs(ve,{open:T,onClose:()=>g(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(Ce,{children:n("projects.deleteProject")}),e.jsx(ke,{children:e.jsx(c,{children:n("projects.confirmDeleteDesc")})}),e.jsxs(Pe,{children:[e.jsx(D,{onClick:()=>g(!1),children:n("common.cancel")}),e.jsx(D,{variant:"contained",color:"error",onClick:E,startIcon:e.jsx(Ke,{}),children:n("projects.deleteProject")})]})]})]}):e.jsxs(l,{children:[e.jsx(q,{severity:"warning",sx:{mb:3},children:n("deployments.notFound")}),e.jsx(D,{startIcon:e.jsx(pt,{}),onClick:()=>s("/projects"),children:n("common.backToProjects")})]})};class Je{static instance;socket=null;constructor(){}static getInstance(){return Je.instance||(Je.instance=new Je),Je.instance}connect(){return this.socket?.connected?this.socket:(this.socket=Pr(Vt.Socket.Url,{withCredentials:!0,autoConnect:!0,path:Vt.Socket.Path,transports:["websocket","polling"]}),this.socket.on("connect",()=>{}),this.socket.on("disconnect",()=>{}),this.socket.on("connect_error",s=>{console.error("Socket connection error:",s)}),this.socket)}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}getSocket(){return this.socket}joinProject(s){this.socket?.emit("join:project",s)}joinDeployment(s){this.socket?.emit("join:deployment",s)}}const Gs=Je.getInstance();let ze=null;const lt=new Set,Zt=()=>{const[t,s]=i.useState(()=>ze?.connected||!1);return i.useEffect(()=>{if(!ze){ze=Gs.connect();const n=()=>{lt.forEach(a=>a(!0))},r=()=>{lt.forEach(a=>a(!1))};ze.on("connect",n),ze.on("disconnect",r),setTimeout(()=>{lt.forEach(a=>a(ze.connected))},0)}return lt.add(s),()=>{lt.delete(s)}},[]),{IsConnected:t,isConnected:t,socket:ze}},Io=t=>{const{socket:s}=Zt();return i.useEffect(()=>{if(!(!s||!t))return Gs.joinProject(t),()=>{}},[s,t]),{socket:s}},ps=(t,s)=>{const{socket:n}=Zt();i.useEffect(()=>{if(!n)return;const r=d=>{t&&t(d)},a=d=>{s&&s(d)};return n.on("deployment:updated",r),n.on("deployment:completed",a),()=>{n.off("deployment:updated",r),n.off("deployment:completed",a)}},[n,t,s])},Ro=()=>{const t=Oe(),{t:s}=Te(),{formatDateTime:n}=Ae(),[r,a]=i.useState([]),[d,x]=i.useState([]),[o,h]=i.useState(!0),[b,y]=i.useState("all"),[m,w]=i.useState(""),{isConnected:S}=Zt();ps(()=>j(),()=>j());const j=async()=>{h(!0);try{const u=await fe.getAll();a(u),x(u)}catch(u){console.error("Failed to fetch deployments",u)}finally{h(!1)}},v=async u=>{if(window.confirm(s("deployments.confirmCancel")))try{await fe.cancel(u),j()}catch(p){console.error("Failed to cancel deployment",p)}},T=async u=>{if(window.confirm(s("deployments.confirmRetry")))try{await fe.retry(u),j()}catch(p){console.error("Failed to retry deployment",p)}};i.useEffect(()=>{j()},[]),i.useEffect(()=>{let u=r;b!=="all"&&(u=u.filter(p=>p.Status===b)),m&&(u=u.filter(p=>(p.ProjectName||"").toLowerCase().includes(m.toLowerCase())||p.Branch.toLowerCase().includes(m.toLowerCase()))),x(u)},[r,b,m]);const g=u=>{const p={success:{color:"success",icon:e.jsx(Qt,{fontSize:"small"}),label:s("deployments.statuses.success")},failed:{color:"error",icon:e.jsx(jt,{fontSize:"small"}),label:s("deployments.statuses.failed")},inProgress:{color:"warning",icon:e.jsx(Se,{fontSize:"small"}),label:s("deployments.statuses.inProgress")},pending:{color:"default",icon:e.jsx(Se,{fontSize:"small"}),label:s("deployments.statuses.pending")},queued:{color:"default",icon:e.jsx(Se,{fontSize:"small"}),label:s("deployments.statuses.queued")}},f=p[u]||p.pending;return e.jsx(pe,{label:f.label,color:f.color,size:"small",icon:f.icon||void 0})};return e.jsxs(l,{children:[e.jsxs(l,{sx:{mb:4},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:3},children:[e.jsxs(l,{children:[e.jsx(c,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:s("deployments.title")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:s("deployments.description")})]}),e.jsx(D,{startIcon:e.jsx(He,{}),onClick:j,disabled:o,children:s("common.refresh")})]}),e.jsxs(l,{sx:{display:"flex",gap:2,mb:3},children:[e.jsx(W,{placeholder:s("deployments.searchPlaceholder"),size:"small",value:m,onChange:u=>w(u.target.value),sx:{flexGrow:1,maxWidth:400}}),e.jsxs(xe,{size:"small",sx:{minWidth:150},children:[e.jsx(me,{children:s("deployments.statusLabel")}),e.jsxs(ye,{value:b,label:"Status",onChange:u=>y(u.target.value),children:[e.jsx(O,{value:"all",children:s("deployments.allStatuses")}),e.jsx(O,{value:"success",children:s("deployments.success")}),e.jsx(O,{value:"failed",children:s("deployments.failed")}),e.jsx(O,{value:"inProgress",children:s("deployments.inProgress")}),e.jsx(O,{value:"pending",children:s("deployments.pending")})]})]})]})]}),o&&e.jsx(l,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(de,{})}),!o&&d.length===0&&e.jsxs(J,{sx:{textAlign:"center",py:8},children:[e.jsx(De,{sx:{fontSize:64,color:"text.disabled",mb:2}}),e.jsx(c,{variant:"h6",gutterBottom:!0,children:r.length===0?s("deployments.noDeployments"):s("deployments.noDeploymentsMatch")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:r.length===0?s("deployments.deployToSee"):s("deployments.adjustFilters")})]}),!o&&d.length>0&&e.jsx(xt,{component:he,elevation:2,variant:"outlined",sx:{boxShadow:2,borderRadius:2,maxHeight:"60dvh",overflow:"auto"},children:e.jsxs(mt,{children:[e.jsx(yt,{sx:{position:"sticky",top:0,zIndex:1,backgroundColor:"background.paper"},children:e.jsxs(ge,{sx:{bgcolor:u=>Ee(u.palette.primary.main,.05)},children:[e.jsx(I,{sx:{fontWeight:600},children:s("deployments.project")}),e.jsx(I,{sx:{fontWeight:600},children:s("deployments.branch")}),e.jsx(I,{sx:{fontWeight:600},children:s("common.status")}),e.jsx(I,{sx:{fontWeight:600},children:s("deployments.commit")}),e.jsx(I,{sx:{fontWeight:600},children:s("deployments.timestamp")}),e.jsx(I,{sx:{fontWeight:600},children:s("common.actions")})]})}),e.jsx(ft,{children:d.map(u=>e.jsxs(ge,{sx:{"&:hover":{bgcolor:p=>Ee(p.palette.primary.main,.02)}},children:[e.jsx(I,{children:e.jsx(c,{variant:"body2",sx:{fontWeight:500},children:u?.Project?.Name})}),e.jsx(I,{children:e.jsx(pe,{label:u?.Branch,size:"small",variant:"outlined"})}),e.jsx(I,{children:g(u.Status)}),e.jsx(I,{children:e.jsx(c,{variant:"caption",sx:{fontFamily:"monospace",bgcolor:p=>Ee(p.palette.text.primary,.05),px:1,py:.5,borderRadius:.5},children:u.CommitHash?.substring(0,7)||"N/A"})}),e.jsx(I,{children:e.jsx(c,{variant:"body2",color:"text.secondary",children:n(u.CreatedAt)})}),e.jsxs(I,{children:[e.jsx(D,{size:"small",startIcon:e.jsx(Ue,{}),onClick:()=>t(`/deployments/${u.Id}`),children:s("deployments.viewLogs")}),(u.Status==="queued"||u.Status==="inProgress")&&e.jsx(D,{size:"small",color:"error",startIcon:e.jsx(Ws,{}),onClick:()=>v(u.Id),sx:{ml:1},children:s("common.cancel")}),u.Status==="failed"&&e.jsx(D,{size:"small",color:"warning",startIcon:e.jsx(Ls,{}),onClick:()=>T(u.Id),sx:{ml:1},children:s("common.retry")})]})]},u.Id))})]})}),!o&&d.length>0&&e.jsxs(l,{sx:{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center",px:2},children:[e.jsxs(c,{variant:"caption",color:"text.secondary",children:["Showing ",d.length," of ",r.length," deployments"]}),e.jsx(c,{variant:"caption",color:"text.secondary",children:S?"⚡ Real-time updates active":"🔌 Connecting..."})]})]})},Eo=()=>{const{id:t}=As(),s=Oe(),{t:n}=_t(),{formatDateTime:r}=Ae(),a=i.useRef(null),[d,x]=i.useState(null),[o,h]=i.useState(""),[b,y]=i.useState(!0),[m,w]=i.useState(null);Io(d?.ProjectId),ps(f=>{f.Id===Number(t)&&(x(f),(f.Status==="success"||f.Status==="failed")&&j())});const S=async()=>{try{if(!t)return;const f=await fe.getById(Number(t));x(f)}catch{w("Failed to load deployment details")}finally{y(!1)}},j=async()=>{try{if(!t)return;const f=await fe.getLogs(Number(t));h(f)}catch{console.error("Failed to load logs")}};i.useEffect(()=>{S(),j()},[t]),i.useEffect(()=>{a.current?.scrollIntoView({behavior:"smooth"})},[o]);const v=()=>{s("/deployments")},T=()=>{const f=new Blob([o],{type:"text/plain"}),P=URL.createObjectURL(f),C=document.createElement("a");C.href=P,C.download=`deployment-${t}-logs.txt`,C.click(),URL.revokeObjectURL(P)},g=async()=>{try{await fe.retry(Number(t)),S(),j()}catch(f){console.error("Failed to retry deployment:",f)}},u=f=>f.includes("[ERROR]")||f.includes("ERROR")||f.includes("Failed")?"#ff6b6b":f.includes("[SUCCESS]")||f.includes("SUCCESS")||f.includes("✅")?"#51cf66":f.includes("[WARNING]")||f.includes("WARNING")||f.includes("⚠️")?"#ffd43b":f.includes("[INFO]")||f.includes("INFO")?"#74c0fc":"#d4d4d4",p=f=>{const P={success:{color:"success",icon:e.jsx(Qt,{}),label:n("deployments.statuses.success")},failed:{color:"error",icon:e.jsx(jt,{}),label:n("deployments.statuses.failed")},inProgress:{color:"warning",icon:e.jsx(Ns,{}),label:n("deployments.statuses.inProgress")},queued:{color:"default",icon:e.jsx(Se,{}),label:n("deployments.statuses.queued")},pending:{color:"default",icon:e.jsx(Se,{}),label:n("deployments.statuses.pending")}},C=P[f]||P.pending;return e.jsx(pe,{label:C.label,color:C.color,icon:C.icon})};return b?e.jsx(l,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(de,{})}):m||!d?e.jsxs(l,{sx:{p:3},children:[e.jsx(q,{severity:"error",children:m||"Deployment not found"}),e.jsx(D,{startIcon:e.jsx(pt,{}),onClick:v,sx:{mt:2},children:n("common.back")})]}):e.jsxs(l,{children:[e.jsxs(l,{sx:{mb:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(D,{startIcon:e.jsx(pt,{}),onClick:v,children:n("common.back")}),e.jsxs(c,{variant:"h5",sx:{fontWeight:600},children:["Deployment #",d.Id]}),p(d.Status)]}),e.jsxs(l,{sx:{display:"flex",gap:1},children:[e.jsx(st,{title:n("common.refresh")||"Refresh",children:e.jsx(Z,{onClick:()=>{S(),j()},children:e.jsx(He,{})})}),e.jsx(D,{variant:"outlined",startIcon:e.jsx(cs,{}),onClick:T,size:"small",children:n("logs.downloadLogs")||"Download Logs"}),d.Status==="failed"&&e.jsx(D,{variant:"contained",startIcon:e.jsx(Ls,{}),onClick:g,size:"small",children:n("deployments.retryDeployment")||"Retry"})]})]}),e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{size:{xs:12,md:4},children:e.jsx(J,{children:e.jsxs(se,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Details"}),e.jsx(ae,{sx:{mb:2}}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(l,{children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:"Project"}),e.jsx(c,{variant:"body1",children:d.ProjectName})]}),e.jsxs(l,{children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:"Branch"}),e.jsx(c,{variant:"body1",children:d.Branch})]}),e.jsxs(l,{children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:"Commit"}),e.jsx(c,{variant:"body2",sx:{fontFamily:"monospace"},children:d.Commit?.substring(0,7)||"N/A"})]}),e.jsxs(l,{children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:"Triggered By"}),e.jsx(c,{variant:"body1",children:d.Author||"System"})]}),e.jsxs(l,{children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:"Duration"}),e.jsx(c,{variant:"body1",children:d.Duration?`${d.Duration}s`:"-"})]}),e.jsxs(l,{children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:"Date"}),e.jsx(c,{variant:"body1",children:r(d.CreatedAt)})]})]})]})})}),e.jsx(N,{size:{xs:12,md:8},children:e.jsxs(he,{sx:{bgcolor:"#1e1e1e",color:"#d4d4d4",fontFamily:"monospace",fontSize:"0.875rem",minHeight:"400px",maxHeight:"600px",overflow:"auto",borderRadius:2,boxShadow:3,position:"relative"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",p:2,pb:1.5,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs(l,{sx:{display:"flex",gap:1},children:[e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"#ff5f56"}}),e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"#ffbd2e"}}),e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"#27c93f"}})]}),e.jsxs(c,{variant:"caption",sx:{ml:2,color:"rgba(255,255,255,0.6)"},children:["deployment-",t,".log"]})]}),e.jsxs(l,{sx:{p:2},children:[!o||o.trim().length===0?e.jsx(c,{sx:{color:"rgba(255,255,255,0.6)",fontStyle:"italic"},children:n("deployments.noLogsAvailable")||"Waiting for logs..."}):o.split(`
`).map((f,P)=>f.trim().length>0&&e.jsx(l,{sx:{mb:.5,color:u(f),whiteSpace:"pre-wrap",wordBreak:"break-word"},children:f},P)),e.jsx("div",{ref:a})]}),d.Status==="inProgress"&&e.jsxs(l,{sx:{position:"absolute",top:16,right:16,display:"flex",alignItems:"center",gap:1,bgcolor:"rgba(0,0,0,0.5)",px:2,py:1,borderRadius:1},children:[e.jsx(l,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#27c93f",animation:"pulse 2s infinite","@keyframes pulse":{"0%, 100%":{opacity:1},"50%":{opacity:.3}}}}),e.jsx(c,{variant:"caption",sx:{color:"#27c93f"},children:n("deployments.liveIndicator")||"LIVE"})]})]})})]})]})},Fo=()=>{const{t}=Te();hs();const[s,n]=i.useState("last30"),[r,a]=i.useState("overview"),d={totalDeployments:145,successRate:92,avgDuration:"4m 12s",activeProjects:8},x=o=>{console.log(`Exporting report as ${o}...`)};return e.jsxs(l,{children:[e.jsxs(l,{sx:{mb:4},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:3},children:[e.jsxs(l,{children:[e.jsx(c,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:t("reports.title")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:t("reports.overview")})]}),e.jsxs(l,{sx:{display:"flex",gap:2},children:[e.jsx(D,{variant:"outlined",startIcon:e.jsx(cs,{}),onClick:()=>x("csv"),children:"CSV"}),e.jsx(D,{variant:"contained",startIcon:e.jsx(cs,{}),onClick:()=>x("pdf"),children:"PDF"})]})]}),e.jsx(J,{sx:{mb:4},children:e.jsx(se,{children:e.jsxs(N,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(N,{size:{xs:12,md:4},children:e.jsxs(xe,{fullWidth:!0,size:"small",children:[e.jsx(me,{children:t("reports.dateRange")}),e.jsxs(ye,{value:s,label:t("reports.dateRange"),onChange:o=>n(o.target.value),children:[e.jsx(O,{value:"last7",children:t("reports.last7Days")}),e.jsx(O,{value:"last30",children:t("reports.last30Days")}),e.jsx(O,{value:"thisMonth",children:t("reports.thisMonth")}),e.jsx(O,{value:"custom",children:t("reports.customRange")})]})]})}),e.jsx(N,{size:{xs:12,md:4},children:e.jsxs(xe,{fullWidth:!0,size:"small",children:[e.jsx(me,{children:"Report Type"}),e.jsxs(ye,{value:r,label:"Report Type",onChange:o=>a(o.target.value),children:[e.jsx(O,{value:"overview",children:t("reports.overview")}),e.jsx(O,{value:"projects",children:t("reports.deploymentsByProject")}),e.jsx(O,{value:"status",children:t("reports.deploymentsByStatus")})]})]})}),e.jsx(N,{size:{xs:12,md:4},children:e.jsx(D,{fullWidth:!0,variant:"contained",startIcon:e.jsx(yr,{}),color:"secondary",children:t("reports.generate")})})]})})})]}),e.jsxs(N,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(N,{size:{xs:12,sm:6,md:3},children:e.jsxs(he,{sx:{p:3,textAlign:"center",height:"100%"},children:[e.jsx(c,{variant:"h3",color:"primary.main",sx:{fontWeight:700,mb:1},children:d.totalDeployments}),e.jsx(c,{variant:"body2",color:"text.secondary",children:t("dashboard.totalDeployments")})]})}),e.jsx(N,{size:{xs:12,sm:6,md:3},children:e.jsxs(he,{sx:{p:3,textAlign:"center",height:"100%"},children:[e.jsxs(c,{variant:"h3",color:"success.main",sx:{fontWeight:700,mb:1},children:[d.successRate,"%"]}),e.jsx(c,{variant:"body2",color:"text.secondary",children:t("reports.successRate")})]})}),e.jsx(N,{size:{xs:12,sm:6,md:3},children:e.jsxs(he,{sx:{p:3,textAlign:"center",height:"100%"},children:[e.jsx(c,{variant:"h3",color:"info.main",sx:{fontWeight:700,mb:1},children:d.avgDuration}),e.jsx(c,{variant:"body2",color:"text.secondary",children:t("dashboard.averageDuration")})]})}),e.jsx(N,{size:{xs:12,sm:6,md:3},children:e.jsxs(he,{sx:{p:3,textAlign:"center",height:"100%"},children:[e.jsx(c,{variant:"h3",color:"warning.main",sx:{fontWeight:700,mb:1},children:d.activeProjects}),e.jsx(c,{variant:"body2",color:"text.secondary",children:t("dashboard.activeProjects")})]})})]}),e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{size:{xs:12,md:8},children:e.jsx(J,{sx:{height:"100%"},children:e.jsxs(se,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600},children:t("reports.deploymentsTrend")}),e.jsx(fr,{color:"action"})]}),e.jsx(ae,{sx:{mb:3}}),e.jsx(l,{sx:{height:300,display:"flex",alignItems:"flex-end",justifyContent:"space-around",px:2,pb:2,bgcolor:o=>Ee(o.palette.primary.main,.02),borderRadius:2},children:[40,65,45,80,55,90,70].map((o,h)=>e.jsx(l,{sx:{width:"8%",height:`${o}%`,bgcolor:b=>Ee(b.palette.primary.main,.6),borderRadius:"4px 4px 0 0",transition:"all 0.3s","&:hover":{height:`${o+5}%`,bgcolor:"primary.main"}}},h))}),e.jsx(l,{sx:{display:"flex",justifyContent:"space-around",mt:1},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(o=>e.jsx(c,{variant:"caption",color:"text.secondary",children:o},o))})]})})}),e.jsx(N,{size:{xs:12,md:4},children:e.jsx(J,{sx:{height:"100%"},children:e.jsxs(se,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600},children:t("reports.deploymentsByStatus")}),e.jsx(jr,{color:"action"})]}),e.jsx(ae,{sx:{mb:3}}),e.jsxs(l,{sx:{position:"relative",height:300,display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(l,{sx:{width:200,height:200,borderRadius:"50%",background:`conic-gradient(
                                        ${o=>o.palette.success.main} 0% 70%, 
                                        ${o=>o.palette.error.main} 70% 85%, 
                                        ${o=>o.palette.warning.main} 85% 100%
                    )`}}),e.jsxs(l,{sx:{position:"absolute",width:140,height:140,borderRadius:"50%",bgcolor:"background.paper",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[e.jsx(c,{variant:"h4",sx:{fontWeight:700},children:"145"}),e.jsx(c,{variant:"caption",color:"text.secondary",children:"Total"})]})]}),e.jsxs(l,{sx:{mt:2},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"success.main"}}),e.jsx(c,{variant:"body2",children:"Success"})]}),e.jsx(c,{variant:"body2",sx:{fontWeight:600},children:"70%"})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"error.main"}}),e.jsx(c,{variant:"body2",children:"Failed"})]}),e.jsx(c,{variant:"body2",sx:{fontWeight:600},children:"15%"})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"warning.main"}}),e.jsx(c,{variant:"body2",children:"Pending"})]}),e.jsx(c,{variant:"body2",sx:{fontWeight:600},children:"15%"})]})]})]})})})]})]})},Wo=({fullName:t,username:s,email:n,lastLogin:r,memberSince:a,disabled:d,onFullNameChange:x,onUsernameChange:o,onEmailChange:h,onSave:b,t:y})=>{const{formatDateTime:m,formatDate:w}=Ae();return e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:y("settings.profileInformation")}),e.jsx(ae,{sx:{mb:3}}),e.jsxs($,{container:!0,spacing:3,children:[e.jsx($,{item:!0,xs:12,md:6,children:e.jsx(W,{fullWidth:!0,label:y("settings.fullName"),value:t,disabled:d,onChange:S=>x(S.target.value)})}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsx(W,{fullWidth:!0,label:y("settings.username"),value:s,disabled:d,onChange:S=>o(S.target.value)})}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsx(W,{fullWidth:!0,label:y("settings.email"),type:"email",value:n,disabled:d,onChange:S=>h(S.target.value)})}),e.jsx($,{item:!0,xs:12,md:6,display:"flex",alignItems:"center",children:e.jsxs(l,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:y("settings.lastLogin")}),e.jsx(c,{variant:"body1",fontWeight:600,children:r?m(r):y("settings.notAvailable")})]})}),e.jsx($,{item:!0,xs:12,md:6,display:"flex",alignItems:"center",children:e.jsxs(l,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:y("settings.memberSince")}),e.jsx(c,{variant:"body1",fontWeight:600,children:a?w(a):y("settings.notAvailable")})]})}),e.jsx($,{item:!0,xs:12,children:e.jsx(D,{variant:"contained",onClick:b,disabled:d,children:y("settings.saveChanges")})})]})]})},Lo=({language:t,mode:s,color:n,timezone:r,dateFormat:a,timeFormat:d,timezoneOptions:x,dateFormatOptions:o,timeFormatOptions:h,colors:b=["blue","green","purple","orange","red"],disabled:y,saving:m,onLanguageChange:w,onToggleMode:S,onColorSelect:j,onTimezoneChange:v,onDateFormatChange:T,onTimeFormatChange:g,onSave:u,t:p})=>e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:p("settings.appearanceLanguage")}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:p("settings.changesApplyImmediately")}),e.jsxs($,{container:!0,spacing:4,children:[e.jsx($,{item:!0,xs:12,md:6,children:e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{children:p("settings.language")}),e.jsxs(ye,{value:t,label:p("settings.language"),onChange:f=>w(f.target.value),disabled:m||y,children:[e.jsx(O,{value:"en",children:p("settings.english")}),e.jsx(O,{value:"ar",children:p("settings.arabic")})]})]})}),e.jsxs($,{item:!0,xs:12,md:6,children:[e.jsx(re,{control:e.jsx(oe,{checked:s==="dark",onChange:S,disabled:m||y}),label:p(s==="dark"?"settings.darkModeOn":"settings.darkModeOff")}),e.jsx(c,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:p("settings.toggleTheme")})]}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{children:p("settings.timezone")}),e.jsx(ye,{value:r,label:p("settings.timezone"),onChange:f=>v(f.target.value),disabled:m||y,children:x.map(f=>e.jsx(O,{value:f,children:f},f))})]})}),e.jsx($,{item:!0,xs:12,md:3,children:e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{children:p("settings.dateFormat")}),e.jsx(ye,{value:a,label:p("settings.dateFormat"),onChange:f=>T(f.target.value),disabled:m||y,children:o.map(f=>e.jsx(O,{value:f,children:f},f))})]})}),e.jsx($,{item:!0,xs:12,md:3,children:e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{children:p("settings.timeFormat")}),e.jsx(ye,{value:d,label:p("settings.timeFormat"),onChange:f=>g(f.target.value),disabled:m||y,children:h.map(f=>e.jsx(O,{value:f,children:f},f))})]})}),e.jsxs($,{item:!0,xs:12,children:[e.jsx(c,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:p("settings.colorTheme")}),e.jsx(l,{sx:{display:"flex",gap:2,flexWrap:"wrap",mt:2},children:b.map(f=>e.jsx(l,{onClick:()=>j(f),sx:{width:30,height:30,borderRadius:2,bgcolor:`${f}`,cursor:"pointer",border:3,borderColor:n===f?"text.primary":"transparent",transition:"all 0.2s",position:"relative","&:hover":{transform:"scale(1.1)"}},children:n===f&&e.jsx(l,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:18,fontWeight:700},children:"✓"})},f))}),e.jsx(c,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:p("settings.selectPreferredColor")})]}),e.jsx($,{item:!0,xs:12,children:e.jsx(D,{variant:"contained",onClick:u,disabled:m||y,children:p("settings.saveChanges")})})]})]}),No=({emailNotifications:t,notifySuccess:s,notifyFailure:n,notifyProjectUpdate:r,notifySystemAlert:a,discordWebhook:d,slackWebhook:x,disabled:o,onEmailNotificationsChange:h,onNotifySuccessChange:b,onNotifyFailureChange:y,onNotifyProjectUpdateChange:m,onNotifySystemAlertChange:w,onDiscordWebhookChange:S,onSlackWebhookChange:j,onSave:v,onTest:T,t:g})=>e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:g("settings.notificationSettings")}),e.jsx(ae,{sx:{mb:3}}),e.jsxs($,{container:!0,spacing:3,children:[e.jsxs($,{item:!0,xs:12,children:[e.jsx(re,{control:e.jsx(oe,{checked:t,onChange:u=>h(u.target.checked),disabled:o}),label:g("settings.emailNotifications")}),e.jsx(c,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:g("settings.receiveEmailNotifications")})]}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsx(re,{control:e.jsx(oe,{checked:s,onChange:u=>b(u.target.checked),disabled:o}),label:g("settings.notifySuccess")})}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsx(re,{control:e.jsx(oe,{checked:n,onChange:u=>y(u.target.checked),disabled:o}),label:g("settings.notifyFailure")})}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsx(re,{control:e.jsx(oe,{checked:r,onChange:u=>m(u.target.checked),disabled:o}),label:g("settings.notifyProjectUpdates")})}),e.jsx($,{item:!0,xs:12,md:6,children:e.jsx(re,{control:e.jsx(oe,{checked:a,onChange:u=>w(u.target.checked),disabled:o}),label:g("settings.notifySystemAlerts")})}),e.jsx($,{item:!0,xs:12,children:e.jsx(W,{fullWidth:!0,label:g("settings.discordWebhook"),placeholder:g("settings.discordWebhookPlaceholder"),value:d,disabled:o,onChange:u=>S(u.target.value)})}),e.jsx($,{item:!0,xs:12,children:e.jsx(W,{fullWidth:!0,label:g("settings.slackWebhook"),placeholder:g("settings.slackWebhookPlaceholder"),value:x,disabled:o,onChange:u=>j(u.target.value)})}),e.jsxs($,{item:!0,xs:12,children:[e.jsx(D,{variant:"contained",onClick:v,disabled:o,children:g("settings.saveNotificationSettings")}),e.jsx(D,{variant:"outlined",sx:{ml:2},onClick:()=>T("discord"),disabled:o||!d,children:g("settings.testDiscord")}),e.jsx(D,{variant:"outlined",sx:{ml:2},onClick:()=>T("slack"),disabled:o||!x,children:g("settings.testSlack")})]})]})]}),Mo=({currentPassword:t,newPassword:s,confirmPassword:n,disabled:r,twoFactorEnabled:a,twoFactorLoading:d,qrCodeUrl:x,secret:o,backupCodes:h,onCurrentPasswordChange:b,onNewPasswordChange:y,onConfirmPasswordChange:m,onChangePassword:w,onGenerate2FA:S,onEnable2FA:j,onDisable2FA:v,onRegenerateBackupCodes:T,t:g})=>{const[u,p]=i.useState(""),[f,P]=i.useState(""),[C,B]=i.useState(null),[H,K]=i.useState(null),Q=async()=>{try{B(null),K(null),await j(u),B(g("settings.2faEnabled")),p("")}catch(E){console.error(E),K(g("settings.saveFailed"))}},k=async()=>{try{B(null),K(null),await v(f),B(g("settings.2faDisabled")),P("")}catch(E){console.error(E),K(g("settings.saveFailed"))}},M=async()=>{try{B(null),K(null),await T(),B(g("settings.backupCodesRegenerated"))}catch(E){console.error(E),K(g("settings.saveFailed"))}};return e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:g("settings.securitySettings")}),e.jsx(ae,{sx:{mb:3}}),e.jsxs($,{container:!0,spacing:3,children:[e.jsxs($,{item:!0,xs:12,children:[e.jsx(c,{variant:"subtitle1",gutterBottom:!0,children:g("settings.changePassword")}),e.jsx(W,{fullWidth:!0,label:g("settings.currentPassword"),type:"password",value:t,onChange:E=>b(E.target.value),sx:{mb:2}}),e.jsx(W,{fullWidth:!0,label:g("settings.newPassword"),type:"password",value:s,onChange:E=>y(E.target.value),sx:{mb:2}}),e.jsx(W,{fullWidth:!0,label:g("settings.confirmNewPassword"),type:"password",value:n,onChange:E=>m(E.target.value),sx:{mb:2}}),e.jsx(D,{variant:"contained",onClick:w,disabled:r,children:g("settings.updatePassword")})]}),e.jsxs($,{item:!0,xs:12,children:[e.jsx(ae,{sx:{my:2}}),e.jsx(c,{variant:"subtitle1",gutterBottom:!0,children:g("settings.twoFactorAuth")}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:g("settings.twoFactorDesc")}),C&&e.jsx(q,{severity:"success",sx:{mb:2},children:C}),H&&e.jsx(q,{severity:"error",sx:{mb:2},children:H}),!a&&e.jsxs(Yt,{spacing:2,children:[e.jsx(l,{children:e.jsx(D,{variant:"outlined",onClick:S,disabled:d,children:g("settings.generate2fa")})}),x&&e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("img",{src:x,alt:"2FA QR",style:{width:180,height:180}}),e.jsxs(l,{children:[e.jsx(c,{variant:"subtitle2",children:g("settings.scanQr")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:o})]})]}),x&&e.jsxs(l,{sx:{maxWidth:320},children:[e.jsx(W,{fullWidth:!0,label:g("settings.enterTotp"),value:u,onChange:E=>p(E.target.value)}),e.jsx(D,{variant:"contained",sx:{mt:1.5},onClick:Q,disabled:d||!u,children:g("settings.enable2fa")})]})]}),a&&e.jsxs(Yt,{spacing:2,children:[e.jsx(c,{variant:"body2",color:"success.main",children:g("settings.2faEnabled")}),e.jsx(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:e.jsx(D,{variant:"outlined",onClick:M,disabled:d,children:g("settings.regenerateBackupCodes")})}),h&&h.length>0&&e.jsxs(l,{sx:{p:2,border:1,borderColor:"divider",borderRadius:1},children:[e.jsx(c,{variant:"subtitle2",gutterBottom:!0,children:g("settings.backupCodes")}),e.jsx(c,{variant:"caption",color:"text.secondary",display:"block",sx:{mb:1},children:g("settings.backupCodesNote")}),e.jsx(l,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:h.map(E=>e.jsx(l,{sx:{px:1.5,py:.75,borderRadius:1,bgcolor:"background.default",border:1,borderColor:"divider",fontFamily:"monospace"},children:E},E))})]}),e.jsxs(l,{sx:{maxWidth:320},children:[e.jsx(W,{fullWidth:!0,label:g("settings.enterDisableCode"),value:f,onChange:E=>P(E.target.value),helperText:g("settings.useTotpOrBackup")}),e.jsx(D,{variant:"outlined",color:"error",sx:{mt:1.5},onClick:k,disabled:d||!f,children:g("settings.disable2fa")})]})]})]})]})]})},zo=({t,onDeleteAccount:s,loading:n})=>{const[r,a]=i.useState(!1),d=async()=>{await s(),a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:t("settings.accountManagement")}),e.jsx(ae,{sx:{mb:3}}),e.jsxs(l,{sx:{p:3,bgcolor:x=>Ee(x.palette.error.main,.1),borderRadius:2,border:1,borderColor:"error.main"},children:[e.jsx(c,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,color:"error.main"},children:t("settings.dangerZone")}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t("settings.deleteWarning")}),e.jsx(D,{variant:"outlined",color:"error",onClick:()=>a(!0),disabled:n,children:t("settings.deleteAccount")})]}),e.jsxs(ve,{open:r,onClose:()=>a(!1),children:[e.jsx(Ce,{children:t("settings.deleteAccount")}),e.jsx(ke,{children:e.jsx(c,{children:t("settings.deleteAccountConfirm")})}),e.jsxs(Pe,{children:[e.jsx(D,{onClick:()=>a(!1),children:t("settings.cancel")}),e.jsx(D,{onClick:d,color:"error",variant:"contained",disabled:n,children:t("settings.deleteAccount")})]})]})]})},Bo=["deployments:read","deployments:write","projects:read","projects:write","admin:*"],Uo=({apiKeys:t,loading:s,onGenerate:n,onRevoke:r,availableScopes:a,t:d})=>{const{formatDateTime:x}=Ae(),[o,h]=i.useState(!1),[b,y]=i.useState(""),[m,w]=i.useState(["deployments:read"]),[S,j]=i.useState(""),[v,T]=i.useState(null),g=i.useMemo(()=>a||Bo,[a]),u=()=>{h(!1),T(null),y(""),w(["deployments:read"]),j("")},p=async()=>{const P=S?new Date(S):void 0,C=await n({name:b,scopes:m,expiresAt:P||null});C?.key&&T(C.key)},f=P=>{P&&navigator.clipboard.writeText(P)};return e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(c,{variant:"h6",fontWeight:600,children:d("settings.apiKeys")}),e.jsx(D,{startIcon:e.jsx(br,{}),variant:"contained",onClick:()=>h(!0),disabled:s,children:d("settings.generateApiKey")})]}),e.jsx(xt,{children:e.jsxs(mt,{size:"small",children:[e.jsx(yt,{children:e.jsxs(ge,{children:[e.jsx(I,{children:d("settings.name")}),e.jsx(I,{children:d("settings.scopes")}),e.jsx(I,{children:d("settings.createdAt")}),e.jsx(I,{children:d("settings.lastUsed")}),e.jsx(I,{align:"right",children:d("settings.actions")})]})}),e.jsxs(ft,{children:[t.map(P=>e.jsxs(ge,{children:[e.jsx(I,{children:P.Name}),e.jsx(I,{children:e.jsx(l,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:P.Scopes.map(C=>e.jsx(pe,{size:"small",label:C},C))})}),e.jsx(I,{children:x(P.CreatedAt)}),e.jsx(I,{children:P.LastUsedAt?x(P.LastUsedAt):d("settings.notAvailable")}),e.jsx(I,{align:"right",children:e.jsx(st,{title:d("settings.revoke"),children:e.jsx(D,{color:"error",size:"small",startIcon:e.jsx(Ke,{}),onClick:()=>r(P.Id),disabled:s,children:d("settings.revoke")})})})]},P.Id)),t.length===0&&e.jsx(ge,{children:e.jsx(I,{colSpan:5,children:d("settings.noApiKeys")})})]})]})}),e.jsxs(ve,{open:o,onClose:u,fullWidth:!0,maxWidth:"sm",children:[e.jsx(Ce,{children:d("settings.generateApiKey")}),e.jsxs(ke,{dividers:!0,children:[e.jsx(W,{fullWidth:!0,margin:"normal",label:d("settings.name"),value:b,onChange:P=>y(P.target.value)}),e.jsxs(xe,{fullWidth:!0,margin:"normal",children:[e.jsx(me,{children:d("settings.scopes")}),e.jsx(ye,{multiple:!0,value:m,onChange:P=>w(P.target.value),input:e.jsx(qn,{label:d("settings.scopes")}),renderValue:P=>P.join(", "),children:g.map(P=>e.jsx(O,{value:P,children:P},P))})]}),e.jsx(W,{fullWidth:!0,margin:"normal",type:"date",label:d("settings.expiresAt"),InputLabelProps:{shrink:!0},value:S,onChange:P=>j(P.target.value)}),v&&e.jsxs(l,{sx:{mt:2},children:[e.jsx(c,{variant:"subtitle2",gutterBottom:!0,children:d("settings.copyYourKey")}),e.jsxs(l,{sx:{p:1.5,border:1,borderColor:"divider",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,wordBreak:"break-all"},children:[e.jsx(c,{variant:"body2",children:v}),e.jsx(D,{size:"small",startIcon:e.jsx(us,{}),onClick:()=>f(v),variant:"outlined",children:d("settings.copy")})]}),e.jsx(c,{variant:"caption",color:"error",display:"block",sx:{mt:1},children:d("settings.copyWarning")})]})]}),e.jsxs(Pe,{children:[e.jsx(D,{onClick:u,children:d("settings.cancel")}),e.jsx(D,{onClick:p,variant:"contained",disabled:!b||s,children:d("settings.generate")})]})]})]})},Ko=({sessions:t,loading:s,onRevoke:n,onRevokeAll:r,t:a})=>{const{formatDateTime:d}=Ae(),[x,o]=i.useState(t[0]?.Id??null);return e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(c,{variant:"h6",fontWeight:600,children:a("settings.sessions")}),e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs(xe,{size:"small",sx:{minWidth:200},children:[e.jsx(me,{children:a("settings.keepSession")}),e.jsx(ye,{value:x??"",label:a("settings.keepSession"),onChange:h=>o(Number(h.target.value)),disabled:s||t.length===0,children:t.map(h=>e.jsxs(O,{value:h.Id,children:[h.Id," - ",h.IpAddress||a("settings.notAvailable")]},h.Id))})]}),e.jsx(D,{variant:"outlined",color:"warning",disabled:!x||s,onClick:()=>x&&r(x),children:a("settings.revokeAll")})]})]}),e.jsx(xt,{children:e.jsxs(mt,{size:"small",children:[e.jsx(yt,{children:e.jsxs(ge,{children:[e.jsx(I,{children:a("settings.device")}),e.jsx(I,{children:a("settings.ipAddress")}),e.jsx(I,{children:a("settings.userAgent")}),e.jsx(I,{children:a("settings.lastActivity")}),e.jsx(I,{align:"right",children:a("settings.actions")})]})}),e.jsxs(ft,{children:[t.map(h=>e.jsxs(ge,{children:[e.jsx(I,{children:h.DeviceInfo?.device||h.DeviceInfo?.Device||a("settings.notAvailable")}),e.jsx(I,{children:h.IpAddress||a("settings.notAvailable")}),e.jsx(I,{sx:{maxWidth:240,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:h.UserAgent||a("settings.notAvailable")}),e.jsx(I,{children:h.LastActivityAt?d(h.LastActivityAt):a("settings.notAvailable")}),e.jsx(I,{align:"right",children:e.jsx(D,{size:"small",color:"error",onClick:()=>n(h.Id),disabled:s,children:a("settings.revoke")})})]},h.Id)),t.length===0&&e.jsx(ge,{children:e.jsx(I,{colSpan:5,children:a("settings.noSessions")})})]})]})})]})},Be=({children:t,value:s,index:n})=>e.jsx("div",{hidden:s!==n,children:s===n&&e.jsx(l,{sx:{py:3},children:t})}),Oo=()=>{const{User:t}=Fe(),{Language:s,ChangeLanguage:n,t:r}=Te(),{Mode:a,Color:d,ToggleMode:x,SetColor:o}=hs(),[h,b]=i.useState(0),[y,m]=i.useState(null),[w,S]=i.useState(null),[j,v]=i.useState(!1),[T,g]=i.useState(!1),[u,p]=i.useState(!1),[f,P]=i.useState(!1),[C,B]=i.useState(!1),[H,K]=i.useState(!1),[Q,k]=i.useState(!1),[M,E]=i.useState(null),[je,be]=i.useState(null),[We,z]=i.useState([]),[ne,F]=i.useState([]),[V,Ie]=i.useState([]),[nt,$e]=i.useState(t?.Username||""),[rt,Le]=i.useState(t?.Email||""),[qe,Re]=i.useState(t?.FullName||""),[Xt,Jt]=i.useState(t?.LastLogin),[es,ts]=i.useState(t?.CreatedAt),[bt,St]=i.useState(!0),[vt,wt]=i.useState(""),[Ct,kt]=i.useState(""),[Pt,Dt]=i.useState(!0),[Tt,At]=i.useState(!0),[It,Rt]=i.useState(!0),[Et,Ft]=i.useState(!0),[Wt,Lt]=i.useState("UTC"),[Nt,Mt]=i.useState("YYYY-MM-DD"),[zt,Bt]=i.useState("24h"),[ot,Ut]=i.useState(""),[Ge,Kt]=i.useState(""),[Ye,Ve]=i.useState(""),ss=i.useMemo(()=>["UTC","Europe/London","Europe/Berlin","Africa/Cairo","Asia/Riyadh","Asia/Dubai","Asia/Karachi","Asia/Kolkata","Asia/Singapore","Asia/Tokyo","America/New_York","America/Los_Angeles","America/Chicago"],[]),at=i.useMemo(()=>["YYYY-MM-DD","DD/MM/YYYY","MM/DD/YYYY"],[]),Ot=["12h","24h"],ue=R=>{m(R),setTimeout(()=>m(null),2500)},_=R=>{S(R),setTimeout(()=>S(null),3500)};i.useEffect(()=>{(async()=>{try{v(!0);const[U,X,on,an,ln]=await Promise.all([Y.getProfile(),Y.getSettings(),Y.listApiKeys(),Y.listSessions(),Y.get2FAStatus()]),_e=U?.User;_e&&($e(_e.Username||""),Le(_e.Email||""),Re(_e.FullName||""),Jt(_e.LastLogin),ts(_e.CreatedAt)),X&&(St(!!X.EmailNotifications),wt(X.DiscordWebhookUrl||""),kt(X.SlackWebhookUrl||""),Dt(!!X.NotifyOnSuccess),At(!!X.NotifyOnFailure),Rt(!!X.NotifyOnProjectUpdate),Ft(!!X.NotifyOnSystemAlert),Lt(X.Timezone||"UTC"),Mt(X.DateFormat||"YYYY-MM-DD"),Bt(X.TimeFormat||"24h")),F(on||[]),Ie(an||[]),k(!!ln?.enabled),E(null),be(null),z([])}catch(U){console.error("Failed to load settings",U),_(r("settings.loadError"))}finally{v(!1)}})()},[r]);const L=(R,U)=>{b(U),m(null),S(null)},ie=async R=>{try{n(R),await Ne({Language:R})}catch(U){console.error("Language update failed",U),_(r("settings.saveFailed"))}},G=async()=>{try{g(!0),await Y.updateProfile({Username:nt,Email:rt,FullName:qe}),ue(r("settings.profileUpdated"))}catch(R){console.error("Profile update failed",R),_(r("settings.saveFailed"))}finally{g(!1)}},ee=async()=>{try{p(!0),await Y.updateNotificationSettings({EmailNotifications:bt,DiscordWebhookUrl:vt||null,SlackWebhookUrl:Ct||null,NotifyOnSuccess:Pt,NotifyOnFailure:Tt,NotifyOnProjectUpdate:It,NotifyOnSystemAlert:Et}),ue(r("settings.notificationsSaved"))}catch(R){console.error("Notification update failed",R),_(r("settings.saveFailed"))}finally{p(!1)}},le=async()=>{await Ne({})},Ne=async R=>{try{P(!0),await Y.updatePreferences({Timezone:Wt,DateFormat:Nt,TimeFormat:zt,Language:s,Theme:a,ColorTheme:d,...R}),ue(R.Language?r("settings.languageUpdated"):r("settings.preferencesSaved"))}catch(U){console.error("Preferences update failed",U),_(r("settings.saveFailed"))}finally{P(!1)}},ns=async R=>{try{await Y.testNotification(R),ue(r("settings.testNotificationSent"))}catch(U){console.error("Test notification failed",U),_(r("settings.saveFailed"))}},it=async()=>{try{K(!0);const R=await Y.generate2FA();be(R.secret),E(R.qrCodeUrl),z([])}catch(R){console.error("Generate 2FA failed",R),_(r("settings.saveFailed"))}finally{K(!1)}},Vs=async R=>{try{K(!0);const U=await Y.enable2FA(R);z(U.backupCodes||[]),k(!0),E(null),be(null),ue(r("settings.2faEnabled"))}catch(U){console.error("Enable 2FA failed",U),_(r("settings.saveFailed"))}finally{K(!1)}},_s=async R=>{try{K(!0),await Y.disable2FA(R),k(!1),E(null),be(null),z([]),ue(r("settings.2faDisabled"))}catch(U){console.error("Disable 2FA failed",U),_(r("settings.saveFailed"))}finally{K(!1)}},Qs=async()=>{try{K(!0);const R=await Y.regenerateBackupCodes();z(R||[]),ue(r("settings.backupCodesRegenerated"))}catch(R){console.error("Regenerate backup codes failed",R),_(r("settings.saveFailed"))}finally{K(!1)}},Zs=async R=>{try{const U=await Y.generateApiKey(R.name,R.scopes,R.expiresAt||void 0),X=await Y.listApiKeys();return F(X||[]),U}catch(U){return console.error("Generate API key failed",U),_(r("settings.saveFailed")),null}},Xs=async R=>{try{await Y.revokeApiKey(R),F(U=>U.filter(X=>X.Id!==R))}catch(U){console.error("Revoke API key failed",U),_(r("settings.saveFailed"))}},Js=async R=>{try{await Y.revokeSession(R),Ie(U=>U.filter(X=>X.Id!==R))}catch(U){console.error("Revoke session failed",U),_(r("settings.saveFailed"))}},en=async R=>{try{await Y.revokeAllSessions(R);const U=await Y.listSessions();Ie(U||[])}catch(U){console.error("Revoke all sessions failed",U),_(r("settings.saveFailed"))}},tn=async()=>{if(!ot||!Ge||!Ye){_(r("settings.passwordFieldsRequired"));return}if(Ge!==Ye){_(r("settings.passwordMismatch"));return}try{B(!0),await Y.changePassword(ot,Ge),Ut(""),Kt(""),Ve(""),ue(r("settings.passwordUpdated"))}catch(R){console.error("Change password failed",R),_(r("settings.saveFailed"))}finally{B(!1)}},sn=R=>{o(R),Ne({ColorTheme:R})},nn=async()=>{try{await Y.deleteAccount(),ue(r("settings.deleteAccountSuccess"))}catch(R){console.error("Delete account failed",R),_(r("settings.deleteAccountFailed"))}},rn=()=>{x(),Ne({Theme:a==="dark"?"light":"dark"})};return e.jsxs(l,{children:[e.jsxs(l,{sx:{mb:4},children:[e.jsx(c,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:r("settings.title")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:r("settings.subtitle")})]}),y&&e.jsx(q,{severity:"success",sx:{mb:3},onClose:()=>m(null),children:y}),w&&e.jsx(q,{severity:"error",sx:{mb:3},onClose:()=>S(null),children:w}),e.jsxs(J,{children:[e.jsx(l,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(Gn,{value:h,onChange:L,variant:"scrollable",children:[e.jsx(Me,{label:r("settings.profile"),icon:e.jsx(Sr,{}),iconPosition:"start",sx:{minHeight:64}}),e.jsx(Me,{label:r("settings.preferences"),icon:e.jsx(vr,{}),iconPosition:"start",sx:{minHeight:64}}),e.jsx(Me,{label:r("settings.notifications"),icon:e.jsx(wr,{}),iconPosition:"start",sx:{minHeight:64}}),e.jsx(Me,{label:r("settings.apiKeys"),icon:e.jsx(bs,{}),iconPosition:"start",sx:{minHeight:64}}),e.jsx(Me,{label:r("settings.sessions"),icon:e.jsx(as,{}),iconPosition:"start",sx:{minHeight:64}}),e.jsx(Me,{label:r("settings.security"),icon:e.jsx(bs,{}),iconPosition:"start",sx:{minHeight:64}}),e.jsx(Me,{label:r("settings.account"),icon:e.jsx(as,{}),iconPosition:"start",sx:{minHeight:64}})]})}),e.jsxs(se,{children:[e.jsx(Be,{value:h,index:0,children:e.jsx(Wo,{fullName:qe,username:nt,email:rt,lastLogin:Xt,memberSince:es,disabled:j||T,onFullNameChange:Re,onUsernameChange:$e,onEmailChange:Le,onSave:G,t:r})}),e.jsx(Be,{value:h,index:1,children:e.jsx(Lo,{language:s,mode:a,color:d,timezone:Wt,dateFormat:Nt,timeFormat:zt,timezoneOptions:ss,dateFormatOptions:at,timeFormatOptions:Ot,disabled:j,saving:f,onLanguageChange:ie,onToggleMode:rn,onColorSelect:sn,onTimezoneChange:Lt,onDateFormatChange:Mt,onTimeFormatChange:Bt,onSave:le,t:r})}),e.jsx(Be,{value:h,index:2,children:e.jsx(No,{emailNotifications:bt,notifySuccess:Pt,notifyFailure:Tt,notifyProjectUpdate:It,notifySystemAlert:Et,discordWebhook:vt,slackWebhook:Ct,disabled:j||u,onEmailNotificationsChange:St,onNotifySuccessChange:Dt,onNotifyFailureChange:At,onNotifyProjectUpdateChange:Rt,onNotifySystemAlertChange:Ft,onDiscordWebhookChange:wt,onSlackWebhookChange:kt,onSave:ee,onTest:ns,t:r})}),e.jsx(Be,{value:h,index:3,children:e.jsx(Uo,{apiKeys:ne,loading:j,onGenerate:Zs,onRevoke:Xs,t:r})}),e.jsx(Be,{value:h,index:4,children:e.jsx(Ko,{sessions:V,loading:j,onRevoke:Js,onRevokeAll:en,t:r})}),e.jsx(Be,{value:h,index:5,children:e.jsx(Mo,{currentPassword:ot,newPassword:Ge,confirmPassword:Ye,disabled:j||C,twoFactorEnabled:Q,twoFactorLoading:H,qrCodeUrl:M,secret:je,backupCodes:We,onCurrentPasswordChange:Ut,onNewPasswordChange:Kt,onConfirmPasswordChange:Ve,onChangePassword:tn,onGenerate2FA:it,onEnable2FA:Vs,onDisable2FA:_s,onRegenerateBackupCodes:Qs,t:r})}),e.jsx(Be,{value:h,index:6,children:e.jsx(zo,{t:r,onDeleteAccount:nn,loading:j})})]})]})]})},Ho=()=>{const{t}=_t(),{formatDateTime:s}=Ae(),[n,r]=i.useState([]),[a,d]=i.useState(!0),[x,o]=i.useState(null),[h,b]=i.useState(null),[y,m]=i.useState(!1),[w,S]=i.useState(!1),[j,v]=i.useState(null),[T,g]=i.useState(!1),u=async()=>{try{o(null);const M=(await fe.getAll()).filter(E=>E.Status==="pending"||E.Status==="queued"||E.Status==="inProgress");r(M)}catch(k){const M=k&&typeof k=="object"&&"message"in k?String(k.message):"Failed to load queue";o(M)}finally{d(!1)}},{isConnected:p}=Zt();ps(()=>u(),()=>u()),i.useEffect(()=>{u()},[]);const f=k=>{v(k),m(!0)},P=async()=>{if(j)try{g(!0),await fe.cancel(j.Id),b(`${t("deployments.cancel")} succeeded`),m(!1),v(null),u(),setTimeout(()=>b(null),3e3)}catch(k){const M=k&&typeof k=="object"&&"message"in k?String(k.message):"Failed to cancel deployment";o(M),setTimeout(()=>o(null),3e3)}finally{g(!1)}},C=()=>{S(!0)},B=async()=>{try{g(!0),await Promise.all(n.filter(k=>k.Status==="pending"||k.Status==="queued").map(k=>fe.cancel(k.Id))),b(`${t("deployments.cancelAll")} succeeded`),S(!1),u(),setTimeout(()=>b(null),3e3)}catch(k){const M=k&&typeof k=="object"&&"message"in k?String(k.message):"Failed to cancel all deployments";o(M),setTimeout(()=>o(null),3e3)}finally{g(!1)}},H=k=>{const M={pending:{color:"default",icon:e.jsx(Se,{fontSize:"small"}),label:t("deployments.statuses.pending")},queued:{color:"default",icon:e.jsx(Se,{fontSize:"small"}),label:t("deployments.statuses.queued")},inProgress:{color:"warning",icon:e.jsx(Ns,{fontSize:"small"}),label:t("deployments.statuses.inProgress")}},E=M[k]||M.pending;return e.jsx(pe,{label:E.label,color:E.color,size:"small",icon:E.icon})},K=()=>e.jsx(l,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(de,{})}),Q=()=>e.jsxs(he,{sx:{textAlign:"center",py:8},children:[e.jsx(Se,{sx:{fontSize:64,color:"text.disabled",mb:2}}),e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("deployments.noDeployments")}),e.jsx(c,{variant:"body2",color:"text.secondary",children:"All deployments are completed or there are no pending items"})]});return e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(l,{children:[e.jsxs(c,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:[t("deployments.title")," - Queue"]}),e.jsx(c,{variant:"body2",color:"text.secondary",children:"Monitor and manage deployment queue"})]}),e.jsxs(l,{sx:{display:"flex",gap:1},children:[e.jsx(D,{variant:"outlined",startIcon:e.jsx(He,{}),onClick:u,disabled:a,children:t("deployments.refresh")}),e.jsx(D,{variant:"outlined",color:"error",startIcon:e.jsx(Cr,{}),onClick:C,disabled:n.length===0||T,children:t("deployments.cancelAll")})]})]}),x&&e.jsx(q,{severity:"error",sx:{mb:3},children:x}),h&&e.jsx(q,{severity:"success",sx:{mb:3},children:h}),a&&n.length===0?K():null,!a&&n.length===0?Q():null,n.length>0?e.jsxs(xt,{component:he,children:[e.jsxs(mt,{children:[e.jsx(yt,{children:e.jsxs(ge,{sx:{bgcolor:k=>Ee(k.palette.primary.main,.05)},children:[e.jsx(I,{sx:{fontWeight:600},children:"#"}),e.jsx(I,{sx:{fontWeight:600},children:t("deployments.project")}),e.jsx(I,{sx:{fontWeight:600},children:t("deployments.branch")}),e.jsx(I,{sx:{fontWeight:600},children:t("common.status")}),e.jsx(I,{sx:{fontWeight:600},children:t("deployments.createdAt")}),e.jsx(I,{sx:{fontWeight:600},children:t("common.actions")})]})}),e.jsx(ft,{children:n.map((k,M)=>e.jsxs(ge,{hover:!0,children:[e.jsx(I,{children:M+1}),e.jsx(I,{children:e.jsx(c,{variant:"body2",sx:{fontWeight:500},children:k?.Project?.Name})}),e.jsx(I,{children:e.jsx(c,{variant:"body2",children:k?.Branch})}),e.jsx(I,{children:H(k.Status)}),e.jsx(I,{children:e.jsx(c,{variant:"body2",children:s(k?.CreatedAt)})}),e.jsx(I,{children:e.jsx(st,{title:t("deployments.cancel"),children:e.jsx(Z,{size:"small",color:"error",onClick:()=>f(k),disabled:k.Status==="inProgress"||T,children:e.jsx(Ws,{})})})})]},k.Id))})]}),e.jsxs(l,{sx:{p:2,bgcolor:k=>Ee(k.palette.primary.main,.03),display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(c,{variant:"body2",color:"text.secondary",children:[t("deployments.showing")," ",n.length," items in queue"]}),e.jsx(c,{variant:"caption",color:"text.secondary",children:p?"⚡ Real-time updates active":"🔌 Connecting..."})]})]}):null,e.jsxs(ve,{open:y,onClose:()=>m(!1),children:[e.jsxs(Ce,{children:[t("deployments.cancel")," Deployment"]}),e.jsx(ke,{children:e.jsxs(ys,{children:["Are you sure you want to cancel deployment for"," ",e.jsx("strong",{children:j?.ProjectName}),"?"]})}),e.jsxs(Pe,{children:[e.jsx(D,{onClick:()=>m(!1),disabled:T,children:t("common.cancel")}),e.jsx(D,{onClick:P,color:"error",variant:"contained",disabled:T,children:T?e.jsx(de,{size:20}):t("deployments.cancel")})]})]}),e.jsxs(ve,{open:w,onClose:()=>S(!1),children:[e.jsxs(Ce,{children:[t("deployments.cancelAll")," Pending Deployments"]}),e.jsx(ke,{children:e.jsxs(ys,{children:["Are you sure you want to cancel all ",n.filter(k=>k.Status==="pending"||k.Status==="queued").length," pending deployments? This action cannot be undone."]})}),e.jsxs(Pe,{children:[e.jsx(D,{onClick:()=>S(!1),disabled:T,children:t("common.no")}),e.jsx(D,{onClick:B,color:"error",variant:"contained",disabled:T,children:T?e.jsx(de,{size:20}):t("common.yes")})]})]})]})};function Ys(){return e.jsxs(l,{sx:{height:"100dvh",width:"100dvw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,textAlign:"center"},children:[e.jsx(l,{sx:{width:90,height:90,borderRadius:"50%",border:"4px solid #2563EB",borderTopColor:"transparent",animation:"spin 1.2s linear infinite"}}),e.jsx(c,{variant:"h5",sx:{fontWeight:"bold",color:"#2563EB",mt:1},children:"Deploy Center"}),e.jsx(c,{variant:"body1",sx:{color:"#9CA3AF"},children:"Preparing your environment..."}),e.jsx(de,{sx:{color:"#2563EB",mt:2}}),e.jsx("style",{children:`
                    @keyframes spin {
                        from { transform: rotate(0deg); }
                        to { transform: rotate(360deg); }
                    }
        `})]})}class $o extends i.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){this.setState({error:s,errorInfo:n})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()};render(){return this.state.hasError?e.jsx(l,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default",p:3},children:e.jsxs(he,{elevation:3,sx:{p:4,maxWidth:600,textAlign:"center"},children:[e.jsx(jt,{sx:{fontSize:80,color:"error.main",mb:2}}),e.jsx(c,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:"Something went wrong"}),e.jsx(c,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"We're sorry for the inconvenience. An unexpected error occurred while rendering this page."}),!1,e.jsx(D,{variant:"contained",startIcon:e.jsx(He,{}),onClick:this.handleReset,size:"large",children:"Reload Page"})]})}):this.props.children}}const qo=({children:t})=>{const{IsAuthenticated:s,IsLoading:n}=Fe();return n?e.jsx(Ys,{}):s?e.jsx(e.Fragment,{children:t}):e.jsx(qt,{to:"/login",replace:!0})},Ds=({children:t})=>{const{IsAuthenticated:s,IsLoading:n}=Fe();return n?e.jsx(Ys,{}):s?e.jsx(qt,{to:"/dashboard",replace:!0}):e.jsx(e.Fragment,{children:t})},Go=()=>e.jsxs(xn,{children:[e.jsx(ce,{path:"/login",element:e.jsx(Ds,{children:e.jsx(jo,{})})}),e.jsx(ce,{path:"/register",element:e.jsx(Ds,{children:e.jsx(bo,{})})}),e.jsxs(ce,{path:"/",element:e.jsx(qo,{children:e.jsx(fo,{})}),children:[e.jsx(ce,{index:!0,element:e.jsx(qt,{to:"/dashboard",replace:!0})}),e.jsx(ce,{path:"dashboard",element:e.jsx(So,{})}),e.jsx(ce,{path:"projects",element:e.jsx(Do,{})}),e.jsx(ce,{path:"projects/:id",element:e.jsx(Ao,{})}),e.jsx(ce,{path:"deployments",element:e.jsx(Ro,{})}),e.jsx(ce,{path:"deployments/:id",element:e.jsx(Eo,{})}),e.jsx(ce,{path:"queue",element:e.jsx(Ho,{})}),e.jsx(ce,{path:"reports",element:e.jsx(Fo,{})}),e.jsx(ce,{path:"settings",element:e.jsx(Oo,{})})]}),e.jsx(ce,{path:"*",element:e.jsx(qt,{to:"/dashboard",replace:!0})})]}),Yo=()=>e.jsx(gn,{children:e.jsx($o,{children:e.jsx(go,{children:e.jsx(ao,{children:e.jsx(xo,{children:e.jsxs(po,{children:[e.jsx(Yn,{}),e.jsx(Go,{})]})})})})})});mn.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(Yo,{})}));
