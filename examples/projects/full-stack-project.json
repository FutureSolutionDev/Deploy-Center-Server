{
  "Name": "my-fullstack-app",
  "RepoUrl": "https://github.com/username/my-fullstack-app.git",
  "WebhookSecret": "auto-generated-on-creation",
  "Description": "Complete example with all features: backend + frontend, multiple environments, notifications",
  "Config": {
    "Branch": "main",
    "AutoDeploy": true,
    "Environment": "production",
    "ProjectPath": "/var/www/my-fullstack-app",
    "BackendPath": "/var/www/my-fullstack-app/server",
    "FrontendPath": "/var/www/html/myapp",
    "PM2ProcessName": "myapp-backend",
    "DeployOnPaths": [
      "server/**",
      "client/**",
      "package.json",
      "docker-compose.yml"
    ],
    "Pipeline": [
      {
        "Name": "ðŸ“¥ Pull Latest Code",
        "Command": "cd {{ProjectPath}} && git pull origin {{Branch}}",
        "Timeout": 30000,
        "ContinueOnError": false
      },
      {
        "Name": "ðŸ” Check Git Status",
        "Command": "cd {{ProjectPath}} && git status",
        "Timeout": 10000,
        "ContinueOnError": true
      },
      {
        "Name": "ðŸ“¦ Install Backend Dependencies",
        "Command": "cd {{BackendPath}} && npm ci",
        "Timeout": 300000,
        "ContinueOnError": false
      },
      {
        "Name": "ðŸ“¦ Install Frontend Dependencies",
        "Command": "cd {{ProjectPath}}/client && npm ci",
        "Timeout": 300000,
        "ContinueOnError": false
      },
      {
        "Name": "ðŸ—„ï¸ Run Database Migrations",
        "Command": "cd {{BackendPath}} && npm run migrate:up",
        "Timeout": 60000,
        "ContinueOnError": false,
        "RunIf": "{{Environment}} === 'production'"
      },
      {
        "Name": "ðŸ—„ï¸ Seed Database (Dev Only)",
        "Command": "cd {{BackendPath}} && npm run seed",
        "Timeout": 30000,
        "ContinueOnError": true,
        "RunIf": "{{Environment}} === 'development'"
      },
      {
        "Name": "ðŸ”¨ Build Backend (TypeScript)",
        "Command": "cd {{BackendPath}} && npm run build",
        "Timeout": 180000,
        "ContinueOnError": false
      },
      {
        "Name": "ðŸ”¨ Build Frontend (React)",
        "Command": "cd {{ProjectPath}}/client && npm run build",
        "Timeout": 300000,
        "ContinueOnError": false
      },
      {
        "Name": "ðŸ§ª Run Backend Tests",
        "Command": "cd {{BackendPath}} && npm test",
        "Timeout": 120000,
        "ContinueOnError": true,
        "RunIf": "{{Environment}} === 'staging'"
      },
      {
        "Name": "ðŸ“‹ Create Backup",
        "Command": "cp -r {{FrontendPath}} {{FrontendPath}}.backup.$(date +%Y%m%d_%H%M%S)",
        "Timeout": 30000,
        "ContinueOnError": true,
        "RunIf": "{{Environment}} === 'production'"
      },
      {
        "Name": "ðŸš€ Deploy Frontend",
        "Command": "rsync -av --delete {{ProjectPath}}/client/dist/ {{FrontendPath}}/",
        "Timeout": 60000,
        "ContinueOnError": false
      },
      {
        "Name": "ðŸ” Set Frontend Permissions",
        "Command": "chmod -R 755 {{FrontendPath}}",
        "Timeout": 10000,
        "ContinueOnError": true
      },
      {
        "Name": "ðŸ”„ Restart Backend (PM2)",
        "Command": "pm2 reload {{PM2ProcessName}}",
        "Timeout": 30000,
        "ContinueOnError": false
      },
      {
        "Name": "â³ Wait for Backend Startup",
        "Command": "sleep 5",
        "Timeout": 10000,
        "ContinueOnError": true
      },
      {
        "Name": "ðŸ¥ Health Check - Backend",
        "Command": "curl -f http://localhost:3000/health || exit 1",
        "Timeout": 15000,
        "ContinueOnError": false
      },
      {
        "Name": "ðŸ¥ Health Check - Frontend",
        "Command": "curl -f http://localhost/ || exit 1",
        "Timeout": 15000,
        "ContinueOnError": true
      },
      {
        "Name": "ðŸ§¹ Cleanup Old Backups (Keep last 5)",
        "Command": "ls -t {{FrontendPath}}.backup.* | tail -n +6 | xargs rm -rf",
        "Timeout": 20000,
        "ContinueOnError": true,
        "RunIf": "{{Environment}} === 'production'"
      },
      {
        "Name": "ðŸ“Š Log Deployment Metrics",
        "Command": "echo 'Deployment completed at $(date)' >> {{ProjectPath}}/deployment.log",
        "Timeout": 5000,
        "ContinueOnError": true
      }
    ],
    "Notifications": {
      "Discord": {
        "Enabled": true,
        "WebhookUrl": "https://discord.com/api/webhooks/YOUR_ID/YOUR_TOKEN"
      },
      "Slack": {
        "Enabled": true,
        "WebhookUrl": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL"
      },
      "Email": {
        "Enabled": true,
        "Host": "smtp.gmail.com",
        "Port": 587,
        "Secure": false,
        "User": "deployments@yourcompany.com",
        "Password": "your-app-password",
        "From": "Deploy Center <noreply@yourcompany.com>",
        "To": ["team@yourcompany.com", "devops@yourcompany.com"]
      },
      "Telegram": {
        "Enabled": false,
        "BotToken": "YOUR_BOT_TOKEN",
        "ChatId": "YOUR_CHAT_ID"
      }
    }
  },
  "IsActive": true,
  "CreatedBy": 1
}
